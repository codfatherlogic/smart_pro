{"version":3,"file":"Approvals-GoFjqX5m.js","sources":["../../../frontend/src/views/Approvals.vue"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header>\n      <ion-toolbar>\n        <ion-buttons slot=\"start\">\n          <ion-back-button default-href=\"/smart-pro/home\" text=\"\" />\n        </ion-buttons>\n        <ion-title>Approvals</ion-title>\n        <ion-buttons slot=\"end\">\n          <ion-button @click=\"refreshData\">\n            <ion-icon :icon=\"refreshOutline\" />\n          </ion-button>\n        </ion-buttons>\n      </ion-toolbar>\n      <ion-toolbar>\n        <ion-segment v-model=\"approvalType\">\n          <ion-segment-button value=\"date_requests\">\n            <ion-label>Date Requests</ion-label>\n          </ion-segment-button>\n          <ion-segment-button value=\"timesheets\">\n            <ion-label>Time Sheets</ion-label>\n          </ion-segment-button>\n        </ion-segment>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\">\n      <ion-refresher slot=\"fixed\" @ion-refresh=\"handleRefresh\">\n        <ion-refresher-content />\n      </ion-refresher>\n\n      <!-- Loading State -->\n      <div\n        v-if=\"loading\"\n        class=\"p-4\"\n      >\n        <div\n          v-for=\"i in 3\"\n          :key=\"i\"\n          class=\"app-card mb-4 p-4\"\n        >\n          <div class=\"skeleton h-5 w-3/4 mb-2\" />\n          <div class=\"skeleton h-4 w-1/2 mb-2\" />\n          <div class=\"skeleton h-3 w-full\" />\n        </div>\n      </div>\n\n      <!-- Empty State -->\n      <div\n        v-else-if=\"approvalType === 'date_requests' && dateRequests.length === 0\"\n        class=\"empty-state h-full\"\n      >\n        <ion-icon\n          :icon=\"checkmarkDoneOutline\"\n          class=\"empty-state-icon\"\n        />\n        <div class=\"empty-state-title\">\n          No pending date requests\n        </div>\n        <div class=\"empty-state-description\">\n          All date requests have been approved or rejected\n        </div>\n      </div>\n\n      <div\n        v-else-if=\"approvalType === 'timesheets' && timeSheets.length === 0\"\n        class=\"empty-state h-full\"\n      >\n        <ion-icon\n          :icon=\"timeOutline\"\n          class=\"empty-state-icon\"\n        />\n        <div class=\"empty-state-title\">\n          No pending time sheets\n        </div>\n        <div class=\"empty-state-description\">\n          All time sheets have been approved or rejected\n        </div>\n      </div>\n\n      <!-- Date Requests List -->\n      <div\n        v-else-if=\"approvalType === 'date_requests'\"\n        class=\"p-4\"\n      >\n        <div\n          v-for=\"request in dateRequests\"\n          :key=\"request.name\"\n          class=\"app-card mb-4 p-4\"\n        >\n          <div class=\"flex justify-between items-start mb-2\">\n            <div>\n              <h3 class=\"font-semibold text-gray-800\">\n                {{ request.employee_name }}\n              </h3>\n              <div class=\"text-sm text-gray-500\">\n                {{ request.request_type }}\n              </div>\n            </div>\n            <span class=\"status-badge pending\">\n              Pending\n            </span>\n          </div>\n\n          <div class=\"text-sm text-gray-600 mb-3\">\n            <div class=\"flex items-center mb-1\">\n              <ion-icon\n                :icon=\"calendarOutline\"\n                class=\"mr-2\"\n              />\n              {{ formatDate(request.from_date) }} - {{ formatDate(request.to_date) }}\n            </div>\n            <div\n              v-if=\"request.project_title\"\n              class=\"mt-1 text-blue-600\"\n            >\n              <strong>Project:</strong> {{ request.project_title }}\n            </div>\n            <div\n              v-if=\"request.reason\"\n              class=\"mt-2 line-clamp-3\"\n            >\n              <strong>Reason:</strong> {{ stripHtml(request.reason) }}\n            </div>\n            <div\n              v-if=\"request.auto_create_tasks\"\n              class=\"mt-2 text-xs text-green-600\"\n            >\n              Tasks will be auto-created on approval\n            </div>\n          </div>\n\n          <div class=\"flex space-x-2\">\n            <ion-button\n              expand=\"block\"\n              color=\"success\"\n              size=\"small\"\n              :disabled=\"processingRequest === request.name\"\n              @click=\"approveRequest(request.name)\"\n            >\n              <ion-spinner\n                v-if=\"processingRequest === request.name\"\n                name=\"crescent\"\n                class=\"mr-2\"\n              />\n              Approve\n            </ion-button>\n            <ion-button\n              expand=\"block\"\n              color=\"danger\"\n              size=\"small\"\n              :disabled=\"processingRequest === request.name\"\n              @click=\"rejectRequest(request.name)\"\n            >\n              <ion-spinner\n                v-if=\"processingRequest === request.name\"\n                name=\"crescent\"\n                class=\"mr-2\"\n              />\n              Reject\n            </ion-button>\n            <ion-button\n              expand=\"block\"\n              color=\"medium\"\n              size=\"small\"\n              @click=\"viewDetails(request)\"\n            >\n              Details\n            </ion-button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Time Sheets List -->\n      <div\n        v-else\n        class=\"p-4\"\n      >\n        <div\n          v-for=\"timesheet in timeSheets\"\n          :key=\"timesheet.name\"\n          class=\"app-card mb-4 p-4\"\n        >\n          <div class=\"flex justify-between items-start mb-2\">\n            <div>\n              <h3 class=\"font-semibold text-gray-800\">\n                {{ timesheet.employee || 'Employee' }}\n              </h3>\n              <div class=\"text-sm text-gray-500\">\n                {{ timesheet.task || 'General Work' }}\n              </div>\n            </div>\n            <span :class=\"['status-badge', getTimesheetStatusClass(timesheet.status)]\">\n              {{ timesheet.status }}\n            </span>\n          </div>\n\n          <div class=\"text-sm text-gray-600 mb-3\">\n            <div class=\"flex items-center mb-1\">\n              <ion-icon\n                :icon=\"calendarOutline\"\n                class=\"mr-2\"\n              />\n              {{ formatDate(timesheet.date) }}\n            </div>\n            <div class=\"flex items-center\">\n              <ion-icon\n                :icon=\"timeOutline\"\n                class=\"mr-2\"\n              />\n              {{ timesheet.hours_worked }} hours\n            </div>\n            <div\n              v-if=\"timesheet.project\"\n              class=\"mt-1\"\n            >\n              <strong>Project:</strong> {{ timesheet.project }}\n            </div>\n          </div>\n\n          <div class=\"flex space-x-2\">\n            <ion-button\n              v-if=\"timesheet.status === 'Submitted' && canApproveTimesheet(timesheet)\"\n              expand=\"block\"\n              color=\"success\"\n              size=\"small\"\n              :disabled=\"processingTimesheet === timesheet.name\"\n              @click=\"approveTimesheet(timesheet.name)\"\n            >\n              <ion-spinner\n                v-if=\"processingTimesheet === timesheet.name\"\n                name=\"crescent\"\n                class=\"mr-2\"\n              />\n              Approve\n            </ion-button>\n            <ion-button\n              v-if=\"timesheet.status === 'Submitted' && canApproveTimesheet(timesheet)\"\n              expand=\"block\"\n              color=\"danger\"\n              size=\"small\"\n              :disabled=\"processingTimesheet === timesheet.name\"\n              @click=\"rejectTimesheet(timesheet.name)\"\n            >\n              <ion-spinner\n                v-if=\"processingTimesheet === timesheet.name\"\n                name=\"crescent\"\n                class=\"mr-2\"\n              />\n              Reject\n            </ion-button>\n            <ion-button\n              expand=\"block\"\n              color=\"medium\"\n              size=\"small\"\n              @click=\"viewTimesheetDetails(timesheet)\"\n            >\n              Details\n            </ion-button>\n          </div>\n          <!-- Read-only indicator for full access users viewing others' timesheets -->\n          <div v-if=\"timesheet.status === 'Submitted' && !canApproveTimesheet(timesheet)\" class=\"text-xs text-gray-500 mt-2 italic\">\n            View only - not your project\n          </div>\n        </div>\n      </div>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch, computed } from \"vue\"\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonButton,\n  IonButtons,\n  IonBackButton,\n  IonIcon,\n  IonRefresher,\n  IonRefresherContent,\n  IonSegment,\n  IonSegmentButton,\n  IonLabel,\n  IonSpinner,\n  toastController,\n  onIonViewWillEnter,\n} from \"@ionic/vue\"\nimport {\n  refreshOutline,\n  calendarOutline,\n  timeOutline,\n  checkmarkDoneOutline,\n} from \"ionicons/icons\"\nimport { call } from \"frappe-ui\"\nimport { usePermissions } from \"@/composables/usePermissions\"\n\nconst { fetchPermissions, hasFullAccess, isProjectManager, canApproveTimesheetForProject } = usePermissions()\n\nconst loading = ref(true)\nconst approvalType = ref(\"date_requests\")\nconst dateRequests = ref([])\nconst timeSheets = ref([])\nconst processingRequest = ref(\"\")\nconst processingTimesheet = ref(\"\")\n\n// Check if user can approve a specific timesheet\nfunction canApproveTimesheet(timesheet) {\n  // Project managers can only approve timesheets for their projects\n  return canApproveTimesheetForProject(timesheet.project)\n}\n\nasync function loadDateRequests() {\n  try {\n    // Use different API based on user access level\n    if (hasFullAccess.value) {\n      const result = await call(\"smart_pro.smart_pro.api.projects.get_all_date_requests\")\n      // Filter for pending only in approvals view\n      dateRequests.value = (result || []).filter(r => r.status === \"Pending Approval\")\n    } else {\n      const result = await call(\"smart_pro.smart_pro.api.projects.get_pending_approvals\")\n      dateRequests.value = result?.date_requests || []\n    }\n  } catch (err) {\n    console.error(\"Error loading date requests:\", err)\n  }\n}\n\nasync function loadTimeSheets() {\n  try {\n    // Use the new API for project managers and full access users\n    if (hasFullAccess.value || isProjectManager.value) {\n      const result = await call(\"smart_pro.smart_pro.api.projects.get_all_timesheets_for_approval\")\n      timeSheets.value = result || []\n    } else {\n      const result = await call(\"smart_pro.smart_pro.api.projects.get_team_time_sheets\")\n      // Filter for pending time sheets (status = \"Submitted\")\n      timeSheets.value = (result || []).filter(ts => ts.status === \"Submitted\")\n    }\n  } catch (err) {\n    console.error(\"Error loading time sheets:\", err)\n  }\n}\n\nasync function loadData() {\n  loading.value = true\n  // Fetch permissions first\n  await fetchPermissions()\n  await Promise.all([loadDateRequests(), loadTimeSheets()])\n  loading.value = false\n}\n\nasync function approveRequest(requestId) {\n  processingRequest.value = requestId\n  try {\n    await call(\"smart_pro.smart_pro.api.projects.approve_date_request\", {\n      request_id: requestId,\n      status: \"Approved\",\n    })\n\n    const toast = await toastController.create({\n      message: \"Request approved successfully!\",\n      duration: 2000,\n      color: \"success\",\n    })\n    await toast.present()\n\n    // Remove from list\n    dateRequests.value = dateRequests.value.filter(req => req.name !== requestId)\n  } catch (err) {\n    console.error(\"Error approving request:\", err)\n    const toast = await toastController.create({\n      message: err.messages?.[0] || \"Failed to approve request\",\n      duration: 3000,\n      color: \"danger\",\n    })\n    await toast.present()\n  } finally {\n    processingRequest.value = \"\"\n  }\n}\n\nasync function rejectRequest(requestId) {\n  processingRequest.value = requestId\n  try {\n    await call(\"smart_pro.smart_pro.api.projects.approve_date_request\", {\n      request_id: requestId,\n      status: \"Rejected\",\n    })\n\n    const toast = await toastController.create({\n      message: \"Request rejected successfully!\",\n      duration: 2000,\n      color: \"warning\",\n    })\n    await toast.present()\n\n    // Remove from list\n    dateRequests.value = dateRequests.value.filter(req => req.name !== requestId)\n  } catch (err) {\n    console.error(\"Error rejecting request:\", err)\n    const toast = await toastController.create({\n      message: err.messages?.[0] || \"Failed to reject request\",\n      duration: 3000,\n      color: \"danger\",\n    })\n    await toast.present()\n  } finally {\n    processingRequest.value = \"\"\n  }\n}\n\nasync function approveTimesheet(timesheetId) {\n  processingTimesheet.value = timesheetId\n  try {\n    // Use the new permission-aware API\n    await call(\"smart_pro.smart_pro.api.projects.approve_timesheet\", {\n      timesheet_name: timesheetId,\n    })\n\n    const toast = await toastController.create({\n      message: \"Time sheet approved successfully!\",\n      duration: 2000,\n      color: \"success\",\n    })\n    await toast.present()\n\n    // Remove from list\n    timeSheets.value = timeSheets.value.filter(ts => ts.name !== timesheetId)\n  } catch (err) {\n    console.error(\"Error approving time sheet:\", err)\n    const toast = await toastController.create({\n      message: err.messages?.[0] || \"Failed to approve time sheet\",\n      duration: 3000,\n      color: \"danger\",\n    })\n    await toast.present()\n  } finally {\n    processingTimesheet.value = \"\"\n  }\n}\n\nasync function rejectTimesheet(timesheetId) {\n  processingTimesheet.value = timesheetId\n  try {\n    // Use the new permission-aware API\n    await call(\"smart_pro.smart_pro.api.projects.reject_timesheet\", {\n      timesheet_name: timesheetId,\n    })\n\n    const toast = await toastController.create({\n      message: \"Time sheet rejected successfully!\",\n      duration: 2000,\n      color: \"warning\",\n    })\n    await toast.present()\n\n    // Remove from list\n    timeSheets.value = timeSheets.value.filter(ts => ts.name !== timesheetId)\n  } catch (err) {\n    console.error(\"Error rejecting time sheet:\", err)\n    const toast = await toastController.create({\n      message: err.messages?.[0] || \"Failed to reject time sheet\",\n      duration: 3000,\n      color: \"danger\",\n    })\n    await toast.present()\n  } finally {\n    processingTimesheet.value = \"\"\n  }\n}\n\nfunction viewDetails(request) {\n  // For now, just show an alert\n  alert(`Request Details:\\nEmployee: ${request.employee_name}\\nType: ${request.request_type}\\nDates: ${formatDate(request.from_date)} to ${formatDate(request.to_date)}\\nReason: ${request.reason || 'None'}`)\n}\n\nfunction viewTimesheetDetails(timesheet) {\n  alert(`Time Sheet Details:\\nEmployee: ${timesheet.employee}\\nDate: ${formatDate(timesheet.date)}\\nHours: ${timesheet.hours_worked}\\nTask: ${timesheet.task || 'None'}\\nProject: ${timesheet.project || 'None'}`)\n}\n\nfunction formatDate(dateStr) {\n  if (!dateStr) return \"-\"\n  const date = new Date(dateStr)\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })\n}\n\nfunction stripHtml(html) {\n  if (!html) return \"\"\n  return html.replace(/<[^>]*>/g, \"\")\n}\n\nfunction getTimesheetStatusClass(status) {\n  const map = {\n    Draft: \"planning\",\n    Submitted: \"pending\",\n    Approved: \"completed\",\n    Rejected: \"cancelled\",\n  }\n  return map[status] || \"\"\n}\n\nfunction handleRefresh(event) {\n  loadData().finally(() => {\n    event.target.complete()\n  })\n}\n\nfunction refreshData() {\n  loadData()\n}\n\nwatch(approvalType, () => {\n  // Optional: Load data when switching tabs\n})\n\nonMounted(() => {\n  loadData()\n})\n\n// Reload data when navigating back to this tab\nonIonViewWillEnter(() => {\n  loadData()\n})\n</script>\n\n<style scoped>\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  text-align: center;\n}\n\n.empty-state-icon {\n  font-size: 4rem;\n  color: var(--ion-color-medium);\n  margin-bottom: 1rem;\n}\n\n.empty-state-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: var(--ion-color-dark);\n  margin-bottom: 0.5rem;\n}\n\n.empty-state-description {\n  color: var(--ion-color-medium);\n  max-width: 20rem;\n}\n\n.status-badge {\n  display: inline-block;\n  padding: 0.25rem 0.75rem;\n  border-radius: 9999px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n\n.status-badge.pending {\n  background-color: #fef3c7;\n  color: #92400e;\n}\n\n.status-badge.planning {\n  background-color: #e0f2fe;\n  color: #0369a1;\n}\n\n.status-badge.completed {\n  background-color: #d1fae5;\n  color: #065f46;\n}\n\n.status-badge.cancelled {\n  background-color: #fee2e2;\n  color: #991b1b;\n}\n\n.skeleton {\n  background-color: #e5e7eb;\n  border-radius: 0.25rem;\n  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n\n.app-card {\n  background-color: white;\n  border-radius: 0.75rem;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);\n  transition: box-shadow 0.2s;\n}\n\n.app-card:hover {\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n}\n</style>"],"names":["fetchPermissions","hasFullAccess","isProjectManager","canApproveTimesheetForProject","usePermissions","loading","ref","approvalType","dateRequests","timeSheets","processingRequest","processingTimesheet","canApproveTimesheet","timesheet","loadDateRequests","__async","result","call","r","err","loadTimeSheets","ts","loadData","approveRequest","requestId","toastController","req","_a","rejectRequest","approveTimesheet","timesheetId","rejectTimesheet","viewDetails","request","formatDate","viewTimesheetDetails","dateStr","stripHtml","html","getTimesheetStatusClass","status","handleRefresh","event","refreshData","watch","onMounted","onIonViewWillEnter","_createBlock","_unref","IonPage","_createVNode","IonHeader","IonToolbar","IonButtons","IonBackButton","IonTitle","_cache","IonButton","IonIcon","refreshOutline","IonSegment","$event","IonSegmentButton","IonLabel","IonContent","IonRefresher","IonRefresherContent","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","i","_createElementVNode","_hoisted_2","checkmarkDoneOutline","_hoisted_3","timeOutline","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","_hoisted_7","_hoisted_8","_hoisted_9","calendarOutline","_createTextVNode","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","IonSpinner","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_normalizeClass","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23"],"mappings":"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"}