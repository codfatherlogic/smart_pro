var h=(q,u,d)=>new Promise((l,p)=>{var b=i=>{try{v(d.next(i))}catch(s){p(s)}},w=i=>{try{v(d.throw(i))}catch(s){p(s)}},v=i=>i.done?l(i.value):Promise.resolve(i.value).then(b,w);v((d=d.apply(q,u)).next())});import{f as A,r as P,a as O,A as B,q as r,t as e,z as x,M as E,l as g,n as o,v as f,x as t,k as y,F,O as V,y as a}from"./frappe-ui-5f3Xtay5.js";import{j as W,k as N,m as D,y as $,l as H,n as _,d as n,V as L,r as M,B as k,X as I,Y as m,g as j,f as T,t as R,q as z,w as Q,x as X,i as Y}from"./index-BT8PkI2H.js";const G={class:"p-4"},J={key:0,class:"space-y-4"},K={key:1,class:"space-y-4"},U={class:"app-card p-4"},Z={class:"flex items-center justify-between"},tt={class:"flex items-center"},st={class:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mr-3"},et={class:"text-right"},ot={class:"text-2xl font-bold text-blue-600"},lt={class:"mt-3 pt-3 border-t border-gray-100"},nt={class:"flex justify-between text-sm"},it={class:"text-green-600"},at={class:"text-blue-600"},rt={class:"text-gray-500"},dt={class:"app-card p-4"},ct={class:"flex items-center justify-between"},ut={class:"flex items-center"},pt={class:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mr-3"},xt={class:"text-right"},ft={class:"text-2xl font-bold text-purple-600"},vt={class:"mt-3 pt-3 border-t border-gray-100 text-sm text-gray-600"},_t={class:"app-card p-4"},mt={class:"flex items-center justify-between"},gt={class:"flex items-center"},bt={class:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center mr-3"},wt={class:"text-right"},ht={class:"text-2xl font-bold text-orange-600"},yt={class:"mt-3 pt-3 border-t border-gray-100"},kt={class:"flex justify-between text-sm"},jt={class:"text-yellow-600"},Tt={class:"text-green-600"},Rt={class:"text-red-600"},qt={class:"app-card p-4"},Pt={class:"flex items-center justify-between"},Dt={class:"flex items-center"},It={class:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mr-3"},Ct={class:"text-right"},St={class:"text-2xl font-bold text-green-600"},At={class:"mt-3 pt-3 border-t border-gray-100"},Ot={class:"flex justify-between text-sm"},Bt={class:"text-blue-600"},Et={class:"text-yellow-600"},Ft={class:"text-green-600"},Vt={class:"app-card p-4"},Wt={class:"flex items-center justify-between"},Nt={class:"flex items-center"},$t={class:"w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center mr-3"},Ht={class:"text-right"},Lt={class:"text-2xl font-bold text-teal-600"},Mt={class:"mt-3 pt-3 border-t border-gray-100"},zt={class:"flex justify-between text-sm"},Qt={class:"text-blue-600"},Xt={class:"text-yellow-600"},Yt={class:"text-green-600"},Gt={class:"app-card p-4"},Jt={class:"flex items-center justify-between"},Kt={class:"flex items-center"},Ut={class:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mr-3"},Zt={class:"text-right"},ts={class:"text-2xl font-bold text-red-600"},ss={class:"app-card mt-6 p-4"},es={class:"workflow-diagram"},os={class:"workflow-step"},ls={class:"workflow-icon bg-blue-100 text-blue-600"},ns={class:"workflow-arrow"},is={class:"workflow-step"},as={class:"workflow-icon bg-purple-100 text-purple-600"},rs={class:"workflow-arrow"},ds={class:"workflow-step"},cs={class:"workflow-icon bg-orange-100 text-orange-600"},us={class:"workflow-arrow"},ps={class:"workflow-step"},xs={class:"workflow-icon bg-green-100 text-green-600"},fs={class:"workflow-arrow"},vs={class:"workflow-step"},_s={class:"workflow-icon bg-teal-100 text-teal-600"},ms={class:"app-card mt-4 p-4"},gs={class:"grid grid-cols-2 gap-3"},bs={__name:"Connections",setup(q){const u=E(),d=P(!0),l=P({projects:0,activeProjects:0,planningProjects:0,completedProjects:0,assignments:0,dateRequests:0,pendingRequests:0,approvedRequests:0,rejectedRequests:0,tasks:0,openTasks:0,workingTasks:0,completedTasks:0,timesheets:0,draftTimesheets:0,submittedTimesheets:0,approvedTimesheets:0,notifications:0});function p(){return h(this,null,function*(){d.value=!0;try{const i=yield x("smart_pro.smart_pro.api.projects.get_connections_dashboard");i&&(l.value=i)}catch(i){console.error("Error loading connections data:",i),yield b()}finally{d.value=!1}})}function b(){return h(this,null,function*(){try{const[i,s,c,C,S]=yield Promise.all([x("frappe.client.get_count",{doctype:"Smart Project"}),x("frappe.client.get_count",{doctype:"Employee Project Assignment"}),x("frappe.client.get_count",{doctype:"Employee Date Request"}),x("frappe.client.get_count",{doctype:"Smart Task"}),x("frappe.client.get_count",{doctype:"Smart Time Sheet"})]);l.value.projects=i||0,l.value.assignments=s||0,l.value.dateRequests=c||0,l.value.tasks=C||0,l.value.timesheets=S||0}catch(i){console.error("Error loading fallback data:",i)}})}function w(i){p().finally(()=>{i.target.complete()})}function v(){p()}return O(()=>{p()}),(i,s)=>(g(),B(e(Y),null,{default:r(()=>[o(e(W),null,{default:r(()=>[o(e(N),null,{default:r(()=>[o(e(D),{slot:"start"},{default:r(()=>[o(e($),{"default-href":"/smart-pro/home",text:""})]),_:1}),o(e(H),null,{default:r(()=>[...s[4]||(s[4]=[f("Connections Dashboard",-1)])]),_:1}),o(e(D),{slot:"end"},{default:r(()=>[o(e(_),{onClick:v},{default:r(()=>[o(e(n),{icon:e(L)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),o(e(M),{fullscreen:!0},{fixed:r(()=>[o(e(Q),{onIonRefresh:w},{default:r(()=>[o(e(X))]),_:1})]),default:r(()=>[t("div",G,[s[30]||(s[30]=t("div",{class:"app-card mb-4 p-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white"},[t("h2",{class:"text-lg font-bold mb-2"},"Smart Pro Workflow"),t("div",{class:"text-sm opacity-90"}," Project → Assignment → Date Request → Task → Timesheet ")],-1)),d.value?(g(),y("div",J,[(g(),y(F,null,V(6,c=>t("div",{key:c,class:"app-card p-4"},[...s[5]||(s[5]=[t("div",{class:"skeleton h-6 w-1/2 mb-2"},null,-1),t("div",{class:"skeleton h-4 w-3/4"},null,-1)])])),64))])):(g(),y("div",K,[t("div",U,[t("div",Z,[t("div",tt,[t("div",st,[o(e(n),{icon:e(k),class:"text-2xl text-blue-600"},null,8,["icon"])]),s[6]||(s[6]=t("div",null,[t("h3",{class:"font-semibold text-gray-800"},"Smart Projects"),t("p",{class:"text-sm text-gray-500"},"Main project container")],-1))]),t("div",et,[t("div",ot,a(l.value.projects),1),s[7]||(s[7]=t("div",{class:"text-xs text-gray-500"},"Total",-1))])]),t("div",lt,[t("div",nt,[t("span",it,a(l.value.activeProjects)+" Active",1),t("span",at,a(l.value.planningProjects)+" Planning",1),t("span",rt,a(l.value.completedProjects)+" Done",1)])])]),t("div",dt,[t("div",ct,[t("div",ut,[t("div",pt,[o(e(n),{icon:e(I),class:"text-2xl text-purple-600"},null,8,["icon"])]),s[8]||(s[8]=t("div",null,[t("h3",{class:"font-semibold text-gray-800"},"Project Assignments"),t("p",{class:"text-sm text-gray-500"},"Employee to project mapping")],-1))]),t("div",xt,[t("div",ft,a(l.value.assignments),1),s[9]||(s[9]=t("div",{class:"text-xs text-gray-500"},"Total",-1))])]),t("div",vt,[o(e(n),{icon:e(m),class:"mr-1"},null,8,["icon"]),s[10]||(s[10]=f(" Auto-creates Date Request on assignment ",-1))])]),t("div",_t,[t("div",mt,[t("div",gt,[t("div",bt,[o(e(n),{icon:e(j),class:"text-2xl text-orange-600"},null,8,["icon"])]),s[11]||(s[11]=t("div",null,[t("h3",{class:"font-semibold text-gray-800"},"Date Requests"),t("p",{class:"text-sm text-gray-500"},"Leave, WFH, Project dates")],-1))]),t("div",wt,[t("div",ht,a(l.value.dateRequests),1),s[12]||(s[12]=t("div",{class:"text-xs text-gray-500"},"Total",-1))])]),t("div",yt,[t("div",kt,[t("span",jt,a(l.value.pendingRequests)+" Pending",1),t("span",Tt,a(l.value.approvedRequests)+" Approved",1),t("span",Rt,a(l.value.rejectedRequests)+" Rejected",1)])])]),t("div",qt,[t("div",Pt,[t("div",Dt,[t("div",It,[o(e(n),{icon:e(T),class:"text-2xl text-green-600"},null,8,["icon"])]),s[13]||(s[13]=t("div",null,[t("h3",{class:"font-semibold text-gray-800"},"Smart Tasks"),t("p",{class:"text-sm text-gray-500"},"Work items & assignments")],-1))]),t("div",Ct,[t("div",St,a(l.value.tasks),1),s[14]||(s[14]=t("div",{class:"text-xs text-gray-500"},"Total",-1))])]),t("div",At,[t("div",Ot,[t("span",Bt,a(l.value.openTasks)+" Open",1),t("span",Et,a(l.value.workingTasks)+" Working",1),t("span",Ft,a(l.value.completedTasks)+" Done",1)])])]),t("div",Vt,[t("div",Wt,[t("div",Nt,[t("div",$t,[o(e(n),{icon:e(R),class:"text-2xl text-teal-600"},null,8,["icon"])]),s[15]||(s[15]=t("div",null,[t("h3",{class:"font-semibold text-gray-800"},"Time Sheets"),t("p",{class:"text-sm text-gray-500"},"Work hour logging")],-1))]),t("div",Ht,[t("div",Lt,a(l.value.timesheets),1),s[16]||(s[16]=t("div",{class:"text-xs text-gray-500"},"Total",-1))])]),t("div",Mt,[t("div",zt,[t("span",Qt,a(l.value.draftTimesheets)+" Draft",1),t("span",Xt,a(l.value.submittedTimesheets)+" Submitted",1),t("span",Yt,a(l.value.approvedTimesheets)+" Approved",1)])])]),t("div",Gt,[t("div",Jt,[t("div",Kt,[t("div",Ut,[o(e(n),{icon:e(z),class:"text-2xl text-red-600"},null,8,["icon"])]),s[17]||(s[17]=t("div",null,[t("h3",{class:"font-semibold text-gray-800"},"Notifications"),t("p",{class:"text-sm text-gray-500"},"System alerts & updates")],-1))]),t("div",Zt,[t("div",ts,a(l.value.notifications),1),s[18]||(s[18]=t("div",{class:"text-xs text-gray-500"},"Total",-1))])])])])),t("div",ss,[s[24]||(s[24]=t("h3",{class:"font-semibold text-gray-800 mb-4"},"Document Flow",-1)),t("div",es,[t("div",os,[t("div",ls,[o(e(n),{icon:e(k)},null,8,["icon"])]),s[19]||(s[19]=t("div",{class:"workflow-label"},"Project",-1))]),t("div",ns,[o(e(n),{icon:e(m)},null,8,["icon"])]),t("div",is,[t("div",as,[o(e(n),{icon:e(I)},null,8,["icon"])]),s[20]||(s[20]=t("div",{class:"workflow-label"},"Assignment",-1))]),t("div",rs,[o(e(n),{icon:e(m)},null,8,["icon"])]),t("div",ds,[t("div",cs,[o(e(n),{icon:e(j)},null,8,["icon"])]),s[21]||(s[21]=t("div",{class:"workflow-label"},"Date Request",-1))]),t("div",us,[o(e(n),{icon:e(m)},null,8,["icon"])]),t("div",ps,[t("div",xs,[o(e(n),{icon:e(T)},null,8,["icon"])]),s[22]||(s[22]=t("div",{class:"workflow-label"},"Task",-1))]),t("div",fs,[o(e(n),{icon:e(m)},null,8,["icon"])]),t("div",vs,[t("div",_s,[o(e(n),{icon:e(R)},null,8,["icon"])]),s[23]||(s[23]=t("div",{class:"workflow-label"},"Timesheet",-1))])])]),t("div",ms,[s[29]||(s[29]=t("h3",{class:"font-semibold text-gray-800 mb-4"},"Quick Actions",-1)),t("div",gs,[o(e(_),{expand:"block",color:"primary",onClick:s[0]||(s[0]=c=>e(u).push("/smart-pro/projects"))},{default:r(()=>[o(e(n),{icon:e(k),slot:"start"},null,8,["icon"]),s[25]||(s[25]=f(" View Projects ",-1))]),_:1}),o(e(_),{expand:"block",color:"secondary",onClick:s[1]||(s[1]=c=>e(u).push("/smart-pro/date-requests"))},{default:r(()=>[o(e(n),{icon:e(j),slot:"start"},null,8,["icon"]),s[26]||(s[26]=f(" Date Request ",-1))]),_:1}),o(e(_),{expand:"block",color:"success",onClick:s[2]||(s[2]=c=>e(u).push("/smart-pro/tasks"))},{default:r(()=>[o(e(n),{icon:e(T),slot:"start"},null,8,["icon"]),s[27]||(s[27]=f(" View Tasks ",-1))]),_:1}),o(e(_),{expand:"block",color:"tertiary",onClick:s[3]||(s[3]=c=>e(u).push("/smart-pro/timesheet"))},{default:r(()=>[o(e(n),{icon:e(R),slot:"start"},null,8,["icon"]),s[28]||(s[28]=f(" Log Hours ",-1))]),_:1})])])])]),_:1})]),_:1}))}},ks=A(bs,[["__scopeId","data-v-142209e6"]]);export{ks as default};
//# sourceMappingURL=Connections-C8C4HLVQ.js.map
