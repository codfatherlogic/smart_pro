{"version":3,"file":"CreateProject-Cten7zBa.js","sources":["../../../frontend/src/views/CreateProject.vue"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header>\n      <ion-toolbar>\n        <template #start>\n          <ion-buttons>\n            <ion-back-button default-href=\"/smart-pro/projects\" />\n          </ion-buttons>\n        </template>\n        <ion-title>New Project</ion-title>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\">\n      <div class=\"p-4\">\n        <form @submit.prevent=\"handleSubmit\">\n          <!-- Project Title -->\n          <div class=\"mb-4\">\n            <ion-label class=\"block text-sm font-medium text-gray-700 mb-1\">\n              Project Title *\n            </ion-label>\n            <ion-input\n              v-model=\"form.title\"\n              type=\"text\"\n              placeholder=\"Enter project title\"\n              fill=\"outline\"\n              required\n            />\n          </div>\n\n          <!-- Description -->\n          <div class=\"mb-4\">\n            <ion-label class=\"block text-sm font-medium text-gray-700 mb-1\">\n              Description\n            </ion-label>\n            <ion-textarea\n              v-model=\"form.description\"\n              placeholder=\"Enter project description\"\n              fill=\"outline\"\n              :rows=\"3\"\n            />\n          </div>\n\n          <!-- Status -->\n          <div class=\"mb-4\">\n            <ion-label class=\"block text-sm font-medium text-gray-700 mb-1\">\n              Status\n            </ion-label>\n            <ion-select\n              v-model=\"form.status\"\n              fill=\"outline\"\n              interface=\"action-sheet\"\n            >\n              <ion-select-option value=\"Planning\">\n                Planning\n              </ion-select-option>\n              <ion-select-option value=\"Active\">\n                Active\n              </ion-select-option>\n              <ion-select-option value=\"On Hold\">\n                On Hold\n              </ion-select-option>\n              <ion-select-option value=\"Completed\">\n                Completed\n              </ion-select-option>\n              <ion-select-option value=\"Cancelled\">\n                Cancelled\n              </ion-select-option>\n            </ion-select>\n          </div>\n\n          <!-- Start Date -->\n          <div class=\"mb-4\">\n            <ion-label class=\"block text-sm font-medium text-gray-700 mb-1\">\n              Start Date\n            </ion-label>\n            <ion-input\n              v-model=\"form.start_date\"\n              type=\"date\"\n              fill=\"outline\"\n            />\n          </div>\n\n          <!-- End Date -->\n          <div class=\"mb-4\">\n            <ion-label class=\"block text-sm font-medium text-gray-700 mb-1\">\n              End Date\n            </ion-label>\n            <ion-input\n              v-model=\"form.end_date\"\n              type=\"date\"\n              fill=\"outline\"\n            />\n          </div>\n\n          <!-- Budget -->\n          <div class=\"mb-4\">\n            <ion-label class=\"block text-sm font-medium text-gray-700 mb-1\">\n              Budget Amount\n            </ion-label>\n            <ion-input\n              v-model=\"form.budget_amount\"\n              type=\"number\"\n              placeholder=\"0.00\"\n              fill=\"outline\"\n            />\n          </div>\n\n          <!-- Submit Button -->\n          <ion-button\n            expand=\"block\"\n            type=\"submit\"\n            :disabled=\"saving || !form.title\"\n            class=\"mt-6\"\n          >\n            <ion-spinner\n              v-if=\"saving\"\n              name=\"crescent\"\n              class=\"mr-2\"\n            />\n            {{ saving ? \"Creating...\" : \"Create Project\" }}\n          </ion-button>\n        </form>\n\n        <div\n          v-if=\"error\"\n          class=\"mt-4 p-3 bg-red-50 text-red-600 rounded-lg text-sm\"\n        >\n          {{ error }}\n        </div>\n      </div>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport { ref, inject } from \"vue\"\nimport { useRouter } from \"vue-router\"\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonButtons,\n  IonBackButton,\n  IonButton,\n  IonInput,\n  IonTextarea,\n  IonLabel,\n  IonSelect,\n  IonSelectOption,\n  IonSpinner,\n  toastController,\n} from \"@ionic/vue\"\nimport { call } from \"frappe-ui\"\n\nconst router = useRouter()\nconst $dayjs = inject(\"$dayjs\")\n\nconst saving = ref(false)\nconst error = ref(\"\")\n\nconst form = ref({\n  title: \"\",\n  description: \"\",\n  status: \"Planning\",\n  start_date: $dayjs().format(\"YYYY-MM-DD\"),\n  end_date: \"\",\n  budget_amount: \"\",\n})\n\nasync function handleSubmit() {\n  if (!form.value.title) {\n    error.value = \"Project title is required\"\n    return\n  }\n\n  saving.value = true\n  error.value = \"\"\n\n  try {\n    const result = await call(\"frappe.client.insert\", {\n      doc: {\n        doctype: \"Smart Project\",\n        title: form.value.title,\n        description: form.value.description,\n        status: form.value.status,\n        start_date: form.value.start_date || null,\n        end_date: form.value.end_date || null,\n        budget_amount: form.value.budget_amount ? parseFloat(form.value.budget_amount) : 0,\n      },\n    })\n\n    const toast = await toastController.create({\n      message: \"Project created successfully!\",\n      duration: 2000,\n      color: \"success\",\n    })\n    await toast.present()\n\n    // Navigate to the new project\n    router.replace(`/smart-pro/project/${encodeURIComponent(result.name)}`)\n  } catch (err) {\n    console.error(\"Error creating project:\", err)\n    error.value = err.messages?.[0] || err.message || \"Failed to create project\"\n  } finally {\n    saving.value = false\n  }\n}\n</script>\n"],"names":["router","useRouter","$dayjs","inject","saving","ref","error","form","handleSubmit","__async","result","call","toastController","err","_a","_createBlock","_unref","IonPage","_createVNode","IonHeader","IonToolbar","IonButtons","IonBackButton","IonTitle","_cache","IonContent","_createElementVNode","_hoisted_1","_hoisted_2","IonLabel","IonInput","$event","_hoisted_3","IonTextarea","_hoisted_4","IonSelect","IonSelectOption","_hoisted_5","_hoisted_6","_hoisted_7","IonButton","IonSpinner","_createTextVNode","_createElementBlock","_hoisted_8","_toDisplayString"],"mappings":"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"}