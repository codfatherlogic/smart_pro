var y=(x,c,m)=>new Promise((r,n)=>{var a=e=>{try{i(m.next(e))}catch(s){n(s)}},b=e=>{try{i(m.throw(e))}catch(s){n(s)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,b);i((m=m.apply(x,c)).next())});import{r as g,i as k,A as V,q as o,t,M as C,l as _,n as l,v as u,x as d,k as P,N as j,R as B,y as I,z as S}from"./frappe-ui-5f3Xtay5.js";import{j as w,k as U,l as D,m as N,z as E,u as M,e as p,K as v,L as T,G as A,H as f,n as H,J as Y,i as q,M as O}from"./index-BtvF1KL1.js";const R={class:"p-4"},$={class:"mb-4"},z={class:"mb-4"},F={class:"mb-4"},L={class:"mb-4"},G={class:"mb-4"},J={class:"mb-4"},K={key:0,class:"mt-4 p-3 bg-red-50 text-red-600 rounded-lg text-sm"},Z={__name:"CreateProject",setup(x){const c=C(),m=k("$dayjs"),r=g(!1),n=g(""),a=g({title:"",description:"",status:"Planning",start_date:m().format("YYYY-MM-DD"),end_date:"",budget_amount:""});function b(){return y(this,null,function*(){var i;if(!a.value.title){n.value="Project title is required";return}r.value=!0,n.value="";try{const e=yield S("frappe.client.insert",{doc:{doctype:"Smart Project",title:a.value.title,description:a.value.description,status:a.value.status,start_date:a.value.start_date||null,end_date:a.value.end_date||null,budget_amount:a.value.budget_amount?parseFloat(a.value.budget_amount):0}});yield(yield O.create({message:"Project created successfully!",duration:2e3,color:"success"})).present(),c.replace(`/smart-pro/project/${encodeURIComponent(e.name)}`)}catch(e){console.error("Error creating project:",e),n.value=((i=e.messages)==null?void 0:i[0])||e.message||"Failed to create project"}finally{r.value=!1}})}return(i,e)=>(_(),V(t(q),null,{default:o(()=>[l(t(w),null,{default:o(()=>[l(t(U),null,{start:o(()=>[l(t(N),null,{default:o(()=>[l(t(E),{"default-href":"/smart-pro/projects"})]),_:1})]),default:o(()=>[l(t(D),null,{default:o(()=>[...e[6]||(e[6]=[u("New Project",-1)])]),_:1})]),_:1})]),_:1}),l(t(M),{fullscreen:!0},{default:o(()=>[d("div",R,[d("form",{onSubmit:B(b,["prevent"])},[d("div",$,[l(t(p),{class:"block text-sm font-medium text-gray-700 mb-1"},{default:o(()=>[...e[7]||(e[7]=[u(" Project Title * ",-1)])]),_:1}),l(t(v),{modelValue:a.value.title,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.title=s),type:"text",placeholder:"Enter project title",fill:"outline",required:""},null,8,["modelValue"])]),d("div",z,[l(t(p),{class:"block text-sm font-medium text-gray-700 mb-1"},{default:o(()=>[...e[8]||(e[8]=[u(" Description ",-1)])]),_:1}),l(t(T),{modelValue:a.value.description,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.description=s),placeholder:"Enter project description",fill:"outline",rows:3},null,8,["modelValue"])]),d("div",F,[l(t(p),{class:"block text-sm font-medium text-gray-700 mb-1"},{default:o(()=>[...e[9]||(e[9]=[u(" Status ",-1)])]),_:1}),l(t(A),{modelValue:a.value.status,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.status=s),fill:"outline",interface:"action-sheet"},{default:o(()=>[l(t(f),{value:"Planning"},{default:o(()=>[...e[10]||(e[10]=[u(" Planning ",-1)])]),_:1}),l(t(f),{value:"Active"},{default:o(()=>[...e[11]||(e[11]=[u(" Active ",-1)])]),_:1}),l(t(f),{value:"On Hold"},{default:o(()=>[...e[12]||(e[12]=[u(" On Hold ",-1)])]),_:1}),l(t(f),{value:"Completed"},{default:o(()=>[...e[13]||(e[13]=[u(" Completed ",-1)])]),_:1}),l(t(f),{value:"Cancelled"},{default:o(()=>[...e[14]||(e[14]=[u(" Cancelled ",-1)])]),_:1})]),_:1},8,["modelValue"])]),d("div",L,[l(t(p),{class:"block text-sm font-medium text-gray-700 mb-1"},{default:o(()=>[...e[15]||(e[15]=[u(" Start Date ",-1)])]),_:1}),l(t(v),{modelValue:a.value.start_date,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.start_date=s),type:"date",fill:"outline"},null,8,["modelValue"])]),d("div",G,[l(t(p),{class:"block text-sm font-medium text-gray-700 mb-1"},{default:o(()=>[...e[16]||(e[16]=[u(" End Date ",-1)])]),_:1}),l(t(v),{modelValue:a.value.end_date,"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.end_date=s),type:"date",fill:"outline"},null,8,["modelValue"])]),d("div",J,[l(t(p),{class:"block text-sm font-medium text-gray-700 mb-1"},{default:o(()=>[...e[17]||(e[17]=[u(" Budget Amount ",-1)])]),_:1}),l(t(v),{modelValue:a.value.budget_amount,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.budget_amount=s),type:"number",placeholder:"0.00",fill:"outline"},null,8,["modelValue"])]),l(t(H),{expand:"block",type:"submit",disabled:r.value||!a.value.title,class:"mt-6"},{default:o(()=>[r.value?(_(),V(t(Y),{key:0,name:"crescent",class:"mr-2"})):j("",!0),u(" "+I(r.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])],32),n.value?(_(),P("div",K,I(n.value),1)):j("",!0)])]),_:1})]),_:1}))}};export{Z as default};
//# sourceMappingURL=CreateProject-Cw5aamOr.js.map
