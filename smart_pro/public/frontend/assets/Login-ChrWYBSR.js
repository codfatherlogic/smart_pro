var k=(x,_,n)=>new Promise((c,a)=>{var v=t=>{try{u(n.next(t))}catch(p){a(p)}},g=t=>{try{u(n.throw(t))}catch(p){a(p)}},u=t=>t.done?c(t.value):Promise.resolve(t.value).then(v,g);u((n=n.apply(x,_)).next())});import{f as O,r as m,a as z,A as w,q as h,t as l,z as L,M as E,l as r,n as d,x as o,k as f,N as b,R as T,v as I,y,F as G,O as R,Q as U}from"./frappe-ui-5f3Xtay5.js";import{u as A,K as S,n as M,J as P,d as V,s as J,q as K,i as Q,aa as C,ab as $,ac as H,ad as W,ae as X}from"./index-BtvF1KL1.js";const Y={class:"flex flex-col items-center justify-center min-h-full"},Z={class:"w-full max-w-sm"},ee={class:"login-card p-6"},oe={class:"mb-4"},te={class:"mb-6"},se={key:0,class:"mt-4 p-3 error-message rounded-lg text-sm"},le={key:1,class:"divider-container my-6"},ae={key:2,class:"social-login-container"},ne=["onClick","disabled"],ie={key:3,class:"text-center py-4"},re={class:"text-center mt-4"},de={__name:"Login",setup(x){const _=E(),n=m(""),c=m(""),a=m(!1),v=m(""),g=m([]),u=m(!0),t=m(!1),p={"logo-google":X,"logo-github":W,"logo-facebook":H,"logo-microsoft":$,"globe-outline":C};function D(s){return p[s]||C}function B(){return k(this,null,function*(){u.value=!0;try{const s=window.location.origin+"/smart-pro/home",e=yield L("smart_pro.smart_pro.api.projects.get_social_login_providers",{redirect_to:s});e&&e.success&&(g.value=e.providers||[])}catch(s){console.error("Error loading social providers:",s)}finally{u.value=!1}})}function N(){return k(this,null,function*(){var s;if(!(!n.value||!c.value)){a.value=!0,v.value="";try{yield L("login",{usr:n.value,pwd:c.value}),_.push("/smart-pro/home")}catch(e){console.error("Login error:",e),v.value=((s=e.messages)==null?void 0:s[0])||"Invalid email or password"}finally{a.value=!1}}})}function j(s){window.location.href=s.url}function q(){const s=localStorage.getItem("smart-pro-theme");if(s==="dark")t.value=!0,document.body.classList.add("dark"),document.body.classList.remove("light");else if(s==="light")t.value=!1,document.body.classList.add("light"),document.body.classList.remove("dark");else{const e=window.matchMedia("(prefers-color-scheme: dark)").matches;t.value=e,e&&document.body.classList.add("dark")}}function F(){t.value=!t.value,t.value?(document.body.classList.add("dark"),document.body.classList.remove("light"),localStorage.setItem("smart-pro-theme","dark")):(document.body.classList.remove("dark"),document.body.classList.add("light"),localStorage.setItem("smart-pro-theme","light"))}return z(()=>{q(),B()}),(s,e)=>(r(),w(l(Q),null,{default:h(()=>[d(l(A),{fullscreen:!0,class:"ion-padding login-content"},{default:h(()=>[o("div",Y,[e[4]||(e[4]=o("div",{class:"mb-8 text-center"},[o("div",{class:"w-20 h-20 rounded-2xl bg-primary-500 flex items-center justify-center mx-auto mb-4 logo-container"},[o("span",{class:"text-3xl font-bold text-white"},"SP")]),o("h1",{class:"text-2xl font-bold title-text"}," Smart Pro "),o("p",{class:"subtitle-text"}," Project Management ")],-1)),o("div",Z,[o("div",ee,[o("form",{onSubmit:T(N,["prevent"])},[o("div",oe,[d(l(S),{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=i=>n.value=i),type:"email",placeholder:"Email",fill:"outline",disabled:a.value,class:"login-input",required:""},null,8,["modelValue","disabled"])]),o("div",te,[d(l(S),{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=i=>c.value=i),type:"password",placeholder:"Password",fill:"outline",disabled:a.value,class:"login-input",required:""},null,8,["modelValue","disabled"])]),d(l(M),{expand:"block",type:"submit",disabled:a.value||!n.value||!c.value,class:"login-button"},{default:h(()=>[a.value?(r(),w(l(P),{key:0,name:"crescent",class:"mr-2"})):b("",!0),I(" "+y(a.value?"Signing in...":"Sign In"),1)]),_:1},8,["disabled"])],32),v.value?(r(),f("div",se,y(v.value),1)):b("",!0),g.value.length>0?(r(),f("div",le,[...e[2]||(e[2]=[o("div",{class:"divider-line"},null,-1),o("span",{class:"divider-text"},"or continue with",-1),o("div",{class:"divider-line"},null,-1)])])):b("",!0),g.value.length>0?(r(),f("div",ae,[(r(!0),f(G,null,R(g.value,i=>(r(),f("button",{key:i.name,type:"button",class:"social-login-btn",style:U({"--provider-color":i.color}),onClick:ce=>j(i),disabled:a.value},[d(l(V),{icon:D(i.icon)},null,8,["icon"]),o("span",null,y(i.label),1)],12,ne))),128))])):b("",!0),u.value?(r(),f("div",ie,[d(l(P),{name:"dots",class:"social-spinner"})])):b("",!0)]),e[3]||(e[3]=o("div",{class:"text-center mt-6 text-sm"},[o("a",{href:"/login#forgot",class:"forgot-link"},"Forgot Password?")],-1)),o("div",re,[d(l(M),{fill:"clear",size:"small",onClick:F,class:"theme-toggle-btn"},{default:h(()=>[d(l(V),{icon:t.value?l(J):l(K),slot:"start"},null,8,["icon"]),I(" "+y(t.value?"Light Mode":"Dark Mode"),1)]),_:1})])])])]),_:1})]),_:1}))}},ge=O(de,[["__scopeId","data-v-523536ee"]]);export{ge as default};
//# sourceMappingURL=Login-ChrWYBSR.js.map
