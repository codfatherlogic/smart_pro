var V=(w,I,m)=>new Promise((_,r)=>{var d=o=>{try{p(m.next(o))}catch(y){r(y)}},b=o=>{try{p(m.throw(o))}catch(y){r(y)}},p=o=>o.done?_(o.value):Promise.resolve(o.value).then(d,b);p((m=m.apply(w,I)).next())});import{r as k,L as Y,c as R,a as z,A as L,q as a,t as e,M as U,i as q,l as i,n as t,v as c,k as f,F as M,O as F,x as u,N as A,y as v,P as Q}from"./frappe-ui-5f3Xtay5.js";import{j as G,k as x,m as O,y as J,l as K,n as S,d as j,z as D,A as W,B as X,C as g,e as C,r as Z,w as ee,x as te,D as le,E as ae,F as ne,i as se}from"./index-DT4P12y0.js";const oe={key:0,class:"p-4"},ue={key:1,class:"empty-state h-full"},re={class:"empty-state-description"},de={key:2,class:"p-4"},ie=["onClick"],ce={class:"flex justify-between items-start mb-2"},fe={class:"font-semibold text-gray-800"},me={class:"text-sm text-gray-500 mb-3"},pe={key:0,class:"text-sm text-gray-600"},ge={__name:"Projects",setup(w){const I=U(),m=q("$dayjs"),_=k(!0),r=k(""),d=k("all"),b=k([]),p=Y({url:"smart_pro.smart_pro.api.projects.get_user_projects",auto:!1}),o=R(()=>{let s=b.value;if(d.value!=="all"){const n={active:"Active",planning:"Planning",completed:"Completed","on-hold":"On Hold",cancelled:"Cancelled"}[d.value];s=s.filter(N=>N.status===n)}if(r.value){const l=r.value.toLowerCase();s=s.filter(n=>(n.title||n.name).toLowerCase().includes(l)||(n.status||"").toLowerCase().includes(l))}return s}),y=R(()=>r.value?"Try a different search term":d.value!=="all"?`No ${{active:"active",planning:"planning",completed:"completed","on-hold":"on hold",cancelled:"cancelled"}[d.value]} projects`:"Create your first project");function B(){return V(this,null,function*(){_.value=!0;try{yield p.fetch(),b.value=p.data||[]}catch(s){console.error("Error loading projects:",s)}finally{_.value=!1}})}function T(s){B().finally(()=>{s.target.complete()})}function P(s){return s?m(s).format("MMM D, YYYY"):"-"}function $(s){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s)}function E(s){return{Active:"active",Planning:"planning",Completed:"completed","On Hold":"on-hold",Cancelled:"cancelled"}[s]||""}function H(s){I.push(`/smart-pro/project/${encodeURIComponent(s)}`)}function h(){I.push("/smart-pro/project/new")}return z(()=>{B()}),(s,l)=>(i(),L(e(se),null,{default:a(()=>[t(e(G),null,{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(O),{slot:"start"},{default:a(()=>[t(e(J),{"default-href":"/smart-pro/home",text:""})]),_:1}),t(e(K),null,{default:a(()=>[...l[2]||(l[2]=[c("Projects",-1)])]),_:1}),t(e(O),{slot:"end"},{default:a(()=>[t(e(S),{onClick:h},{default:a(()=>[t(e(j),{icon:e(D)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),t(e(x),null,{default:a(()=>[t(e(W),{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=n=>r.value=n),placeholder:"Search projects...",debounce:300},null,8,["modelValue"])]),_:1}),t(e(x),null,{default:a(()=>[t(e(X),{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=n=>d.value=n),scrollable:""},{default:a(()=>[t(e(g),{value:"all"},{default:a(()=>[t(e(C),null,{default:a(()=>[...l[3]||(l[3]=[c("All",-1)])]),_:1})]),_:1}),t(e(g),{value:"active"},{default:a(()=>[t(e(C),null,{default:a(()=>[...l[4]||(l[4]=[c("Active",-1)])]),_:1})]),_:1}),t(e(g),{value:"planning"},{default:a(()=>[t(e(C),null,{default:a(()=>[...l[5]||(l[5]=[c("Planning",-1)])]),_:1})]),_:1}),t(e(g),{value:"completed"},{default:a(()=>[t(e(C),null,{default:a(()=>[...l[6]||(l[6]=[c("Completed",-1)])]),_:1})]),_:1}),t(e(g),{value:"on-hold"},{default:a(()=>[t(e(C),null,{default:a(()=>[...l[7]||(l[7]=[c("On Hold",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(e(Z),{fullscreen:!0},{default:a(()=>[t(e(ee),{slot:"fixed",onIonRefresh:T},{default:a(()=>[t(e(te))]),_:1}),_.value?(i(),f("div",oe,[(i(),f(M,null,F(5,n=>u("div",{key:n,class:"app-card mb-4 p-4"},[...l[8]||(l[8]=[u("div",{class:"skeleton h-5 w-3/4 mb-2"},null,-1),u("div",{class:"skeleton h-4 w-1/2 mb-2"},null,-1),u("div",{class:"skeleton h-3 w-full"},null,-1)])])),64))])):o.value.length===0?(i(),f("div",ue,[t(e(j),{icon:e(le),class:"empty-state-icon"},null,8,["icon"]),l[10]||(l[10]=u("div",{class:"empty-state-title"}," No projects found ",-1)),u("div",re,v(y.value),1),!r.value&&d.value==="all"?(i(),L(e(S),{key:0,class:"mt-4",onClick:h},{default:a(()=>[...l[9]||(l[9]=[c(" Create Project ",-1)])]),_:1})):A("",!0)])):(i(),f("div",de,[(i(!0),f(M,null,F(o.value,n=>(i(),f("div",{key:n.name,class:"app-card mb-4 p-4",onClick:N=>H(n.name)},[u("div",ce,[u("h3",fe,v(n.title||n.name),1),u("span",{class:Q(["status-badge",E(n.status)])},v(n.status),3)]),u("div",me,v(P(n.start_date))+" - "+v(P(n.end_date)),1),n.budget_amount?(i(),f("div",pe," Budget: "+v($(n.budget_amount)),1)):A("",!0)],8,ie))),128))])),t(e(ae),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:a(()=>[t(e(ne),{onClick:h},{default:a(()=>[t(e(j),{icon:e(D)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ge as default};
//# sourceMappingURL=Projects-DrjhgVWK.js.map
