{"version":3,"file":"Projects-DrjhgVWK.js","sources":["../../../frontend/src/views/Projects.vue"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header>\n      <ion-toolbar>\n        <ion-buttons slot=\"start\">\n          <ion-back-button default-href=\"/smart-pro/home\" text=\"\" />\n        </ion-buttons>\n        <ion-title>Projects</ion-title>\n        <ion-buttons slot=\"end\">\n          <ion-button @click=\"createProject\">\n            <ion-icon :icon=\"addOutline\" />\n          </ion-button>\n        </ion-buttons>\n      </ion-toolbar>\n      <ion-toolbar>\n        <ion-searchbar\n          v-model=\"searchQuery\"\n          placeholder=\"Search projects...\"\n          :debounce=\"300\"\n        />\n      </ion-toolbar>\n      <ion-toolbar>\n        <ion-segment v-model=\"statusFilter\" scrollable>\n          <ion-segment-button value=\"all\">\n            <ion-label>All</ion-label>\n          </ion-segment-button>\n          <ion-segment-button value=\"active\">\n            <ion-label>Active</ion-label>\n          </ion-segment-button>\n          <ion-segment-button value=\"planning\">\n            <ion-label>Planning</ion-label>\n          </ion-segment-button>\n          <ion-segment-button value=\"completed\">\n            <ion-label>Completed</ion-label>\n          </ion-segment-button>\n          <ion-segment-button value=\"on-hold\">\n            <ion-label>On Hold</ion-label>\n          </ion-segment-button>\n        </ion-segment>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\">\n      <ion-refresher\n        slot=\"fixed\"\n        @ion-refresh=\"handleRefresh\"\n      >\n        <ion-refresher-content />\n      </ion-refresher>\n\n      <!-- Loading State -->\n      <div\n        v-if=\"loading\"\n        class=\"p-4\"\n      >\n        <div\n          v-for=\"i in 5\"\n          :key=\"i\"\n          class=\"app-card mb-4 p-4\"\n        >\n          <div class=\"skeleton h-5 w-3/4 mb-2\" />\n          <div class=\"skeleton h-4 w-1/2 mb-2\" />\n          <div class=\"skeleton h-3 w-full\" />\n        </div>\n      </div>\n\n      <!-- Empty State -->\n      <div\n        v-else-if=\"filteredProjects.length === 0\"\n        class=\"empty-state h-full\"\n      >\n        <ion-icon\n          :icon=\"folderOutline\"\n          class=\"empty-state-icon\"\n        />\n        <div class=\"empty-state-title\">\n          No projects found\n        </div>\n        <div class=\"empty-state-description\">\n          {{ getEmptyMessage }}\n        </div>\n        <ion-button\n          v-if=\"!searchQuery && statusFilter === 'all'\"\n          class=\"mt-4\"\n          @click=\"createProject\"\n        >\n          Create Project\n        </ion-button>\n      </div>\n\n      <!-- Projects List -->\n      <div\n        v-else\n        class=\"p-4\"\n      >\n        <div\n          v-for=\"project in filteredProjects\"\n          :key=\"project.name\"\n          class=\"app-card mb-4 p-4\"\n          @click=\"goToProject(project.name)\"\n        >\n          <div class=\"flex justify-between items-start mb-2\">\n            <h3 class=\"font-semibold text-gray-800\">\n              {{ project.title || project.name }}\n            </h3>\n            <span :class=\"['status-badge', getStatusClass(project.status)]\">\n              {{ project.status }}\n            </span>\n          </div>\n          <div class=\"text-sm text-gray-500 mb-3\">\n            {{ formatDate(project.start_date) }} - {{ formatDate(project.end_date) }}\n          </div>\n          <div\n            v-if=\"project.budget_amount\"\n            class=\"text-sm text-gray-600\"\n          >\n            Budget: {{ formatCurrency(project.budget_amount) }}\n          </div>\n        </div>\n      </div>\n\n      <!-- FAB -->\n      <ion-fab\n        slot=\"fixed\"\n        vertical=\"bottom\"\n        horizontal=\"end\"\n      >\n        <ion-fab-button @click=\"createProject\">\n          <ion-icon :icon=\"addOutline\" />\n        </ion-fab-button>\n      </ion-fab>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, inject } from \"vue\"\nimport { useRouter } from \"vue-router\"\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonSearchbar,\n  IonRefresher,\n  IonRefresherContent,\n  IonButton,\n  IonButtons,\n  IonBackButton,\n  IonIcon,\n  IonFab,\n  IonFabButton,\n  IonSegment,\n  IonSegmentButton,\n  IonLabel,\n} from \"@ionic/vue\"\nimport { addOutline, folderOutline } from \"ionicons/icons\"\nimport { createResource } from \"frappe-ui\"\n\nconst router = useRouter()\nconst $dayjs = inject(\"$dayjs\")\n\nconst loading = ref(true)\nconst searchQuery = ref(\"\")\nconst statusFilter = ref(\"all\")\nconst projects = ref([])\n\nconst projectsResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_user_projects\",\n  auto: false,\n})\n\nconst filteredProjects = computed(() => {\n  let result = projects.value\n\n  // Apply status filter\n  if (statusFilter.value !== \"all\") {\n    const statusMap = {\n      \"active\": \"Active\",\n      \"planning\": \"Planning\",\n      \"completed\": \"Completed\",\n      \"on-hold\": \"On Hold\",\n      \"cancelled\": \"Cancelled\"\n    }\n    const targetStatus = statusMap[statusFilter.value]\n    result = result.filter(p => p.status === targetStatus)\n  }\n\n  // Apply search filter\n  if (searchQuery.value) {\n    const query = searchQuery.value.toLowerCase()\n    result = result.filter(\n      (p) =>\n        (p.title || p.name).toLowerCase().includes(query) ||\n        (p.status || \"\").toLowerCase().includes(query)\n    )\n  }\n\n  return result\n})\n\nconst getEmptyMessage = computed(() => {\n  if (searchQuery.value) {\n    return \"Try a different search term\"\n  }\n  if (statusFilter.value !== \"all\") {\n    const filterLabels = {\n      \"active\": \"active\",\n      \"planning\": \"planning\",\n      \"completed\": \"completed\",\n      \"on-hold\": \"on hold\",\n      \"cancelled\": \"cancelled\"\n    }\n    return `No ${filterLabels[statusFilter.value]} projects`\n  }\n  return \"Create your first project\"\n})\n\nasync function loadData() {\n  loading.value = true\n  try {\n    await projectsResource.fetch()\n    projects.value = projectsResource.data || []\n  } catch (error) {\n    console.error(\"Error loading projects:\", error)\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction handleRefresh(event) {\n  loadData().finally(() => {\n    event.target.complete()\n  })\n}\n\nfunction formatDate(dateStr) {\n  if (!dateStr) return \"-\"\n  return $dayjs(dateStr).format(\"MMM D, YYYY\")\n}\n\nfunction formatCurrency(amount) {\n  return new Intl.NumberFormat(\"en-IN\", {\n    style: \"currency\",\n    currency: \"INR\",\n  }).format(amount)\n}\n\nfunction getStatusClass(status) {\n  const map = {\n    Active: \"active\",\n    Planning: \"planning\",\n    Completed: \"completed\",\n    \"On Hold\": \"on-hold\",\n    Cancelled: \"cancelled\",\n  }\n  return map[status] || \"\"\n}\n\nfunction goToProject(id) {\n  router.push(`/smart-pro/project/${encodeURIComponent(id)}`)\n}\n\nfunction createProject() {\n  router.push(\"/smart-pro/project/new\")\n}\n\nonMounted(() => {\n  loadData()\n})\n</script>\n"],"names":["router","useRouter","$dayjs","inject","loading","ref","searchQuery","statusFilter","projects","projectsResource","createResource","filteredProjects","computed","result","targetStatus","p","query","getEmptyMessage","loadData","__async","error","handleRefresh","event","formatDate","dateStr","formatCurrency","amount","getStatusClass","status","goToProject","id","createProject","onMounted","_createBlock","_unref","IonPage","_createVNode","IonHeader","IonToolbar","IonButtons","IonBackButton","IonTitle","_cache","IonButton","IonIcon","addOutline","IonSearchbar","$event","IonSegment","IonSegmentButton","IonLabel","IonContent","IonRefresher","IonRefresherContent","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","i","_createElementVNode","_hoisted_2","folderOutline","_hoisted_3","_toDisplayString","_hoisted_4","project","_hoisted_6","_hoisted_7","_normalizeClass","_hoisted_8","_hoisted_9","IonFab","IonFabButton"],"mappings":"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"}