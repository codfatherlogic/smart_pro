var x=(g,y,i)=>new Promise((p,u)=>{var _=l=>{try{f(i.next(l))}catch(v){u(v)}},h=l=>{try{f(i.throw(l))}catch(v){u(v)}},f=l=>l.done?p(l.value):Promise.resolve(l.value).then(_,h);f((i=i.apply(g,y)).next())});import{r as C,L as O,c as Y,a as $,A as j,q as n,t as e,M as z,i as A,l as c,n as t,v as w,k as d,F as B,O as N,x as r,N as P,y as m,P as S}from"./frappe-ui-5f3Xtay5.js";import{j as q,k as R,m as V,y as E,l as H,n as D,d as I,z as F,A as U,r as Q,w as G,x as J,B as K,C as W,D as X,i as Z}from"./index-By_Ni_xe.js";const ee={key:0,class:"p-4"},te={key:1,class:"empty-state h-full"},ae={class:"empty-state-description"},se={key:2,class:"p-4"},oe=["onClick"],ne={class:"flex justify-between items-start mb-2"},le={class:"font-semibold text-gray-800"},re={class:"text-sm text-gray-500 mb-3"},ue={key:0,class:"text-sm text-gray-600"},me={__name:"Projects",setup(g){const y=z(),i=A("$dayjs"),p=C(!0),u=C(""),_=C([]),h=O({url:"smart_pro.smart_pro.api.projects.get_user_projects",auto:!1}),f=Y(()=>{if(!u.value)return _.value;const a=u.value.toLowerCase();return _.value.filter(s=>(s.title||s.name).toLowerCase().includes(a)||(s.status||"").toLowerCase().includes(a))});function l(){return x(this,null,function*(){p.value=!0;try{yield h.fetch(),_.value=h.data||[]}catch(a){console.error("Error loading projects:",a)}finally{p.value=!1}})}function v(a){l().finally(()=>{a.target.complete()})}function b(a){return a?i(a).format("MMM D, YYYY"):"-"}function L(a){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a)}function M(a){return{Active:"active",Planning:"planning",Completed:"completed","On Hold":"on-hold",Cancelled:"cancelled"}[a]||""}function T(a){y.push(`/smart-pro/project/${encodeURIComponent(a)}`)}function k(){y.push("/smart-pro/project/new")}return $(()=>{l()}),(a,s)=>(c(),j(e(Z),null,{default:n(()=>[t(e(q),null,{default:n(()=>[t(e(R),null,{default:n(()=>[t(e(V),{slot:"start"},{default:n(()=>[t(e(E),{"default-href":"/smart-pro/home",text:""})]),_:1}),t(e(H),null,{default:n(()=>[...s[1]||(s[1]=[w("Projects",-1)])]),_:1}),t(e(V),{slot:"end"},{default:n(()=>[t(e(D),{onClick:k},{default:n(()=>[t(e(I),{icon:e(F)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),t(e(R),null,{default:n(()=>[t(e(U),{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=o=>u.value=o),placeholder:"Search projects...",debounce:300},null,8,["modelValue"])]),_:1})]),_:1}),t(e(Q),{fullscreen:!0},{default:n(()=>[t(e(G),{slot:"fixed",onIonRefresh:v},{default:n(()=>[t(e(J))]),_:1}),p.value?(c(),d("div",ee,[(c(),d(B,null,N(5,o=>r("div",{key:o,class:"app-card mb-4 p-4"},[...s[2]||(s[2]=[r("div",{class:"skeleton h-5 w-3/4 mb-2"},null,-1),r("div",{class:"skeleton h-4 w-1/2 mb-2"},null,-1),r("div",{class:"skeleton h-3 w-full"},null,-1)])])),64))])):f.value.length===0?(c(),d("div",te,[t(e(I),{icon:e(K),class:"empty-state-icon"},null,8,["icon"]),s[4]||(s[4]=r("div",{class:"empty-state-title"}," No projects found ",-1)),r("div",ae,m(u.value?"Try a different search term":"Create your first project"),1),u.value?P("",!0):(c(),j(e(D),{key:0,class:"mt-4",onClick:k},{default:n(()=>[...s[3]||(s[3]=[w(" Create Project ",-1)])]),_:1}))])):(c(),d("div",se,[(c(!0),d(B,null,N(f.value,o=>(c(),d("div",{key:o.name,class:"app-card mb-4 p-4",onClick:ce=>T(o.name)},[r("div",ne,[r("h3",le,m(o.title||o.name),1),r("span",{class:S(["status-badge",M(o.status)])},m(o.status),3)]),r("div",re,m(b(o.start_date))+" - "+m(b(o.end_date)),1),o.budget_amount?(c(),d("div",ue," Budget: "+m(L(o.budget_amount)),1)):P("",!0)],8,oe))),128))])),t(e(W),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:n(()=>[t(e(X),{onClick:k},{default:n(()=>[t(e(I),{icon:e(F)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{me as default};
//# sourceMappingURL=Projects-q2YuOSkF.js.map
