{"version":3,"file":"Projects-q2YuOSkF.js","sources":["../../../frontend/src/views/Projects.vue"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header>\n      <ion-toolbar>\n        <ion-buttons slot=\"start\">\n          <ion-back-button default-href=\"/smart-pro/home\" text=\"\" />\n        </ion-buttons>\n        <ion-title>Projects</ion-title>\n        <ion-buttons slot=\"end\">\n          <ion-button @click=\"createProject\">\n            <ion-icon :icon=\"addOutline\" />\n          </ion-button>\n        </ion-buttons>\n      </ion-toolbar>\n      <ion-toolbar>\n        <ion-searchbar\n          v-model=\"searchQuery\"\n          placeholder=\"Search projects...\"\n          :debounce=\"300\"\n        />\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\">\n      <ion-refresher\n        slot=\"fixed\"\n        @ion-refresh=\"handleRefresh\"\n      >\n        <ion-refresher-content />\n      </ion-refresher>\n\n      <!-- Loading State -->\n      <div\n        v-if=\"loading\"\n        class=\"p-4\"\n      >\n        <div\n          v-for=\"i in 5\"\n          :key=\"i\"\n          class=\"app-card mb-4 p-4\"\n        >\n          <div class=\"skeleton h-5 w-3/4 mb-2\" />\n          <div class=\"skeleton h-4 w-1/2 mb-2\" />\n          <div class=\"skeleton h-3 w-full\" />\n        </div>\n      </div>\n\n      <!-- Empty State -->\n      <div\n        v-else-if=\"filteredProjects.length === 0\"\n        class=\"empty-state h-full\"\n      >\n        <ion-icon\n          :icon=\"folderOutline\"\n          class=\"empty-state-icon\"\n        />\n        <div class=\"empty-state-title\">\n          No projects found\n        </div>\n        <div class=\"empty-state-description\">\n          {{ searchQuery ? \"Try a different search term\" : \"Create your first project\" }}\n        </div>\n        <ion-button\n          v-if=\"!searchQuery\"\n          class=\"mt-4\"\n          @click=\"createProject\"\n        >\n          Create Project\n        </ion-button>\n      </div>\n\n      <!-- Projects List -->\n      <div\n        v-else\n        class=\"p-4\"\n      >\n        <div\n          v-for=\"project in filteredProjects\"\n          :key=\"project.name\"\n          class=\"app-card mb-4 p-4\"\n          @click=\"goToProject(project.name)\"\n        >\n          <div class=\"flex justify-between items-start mb-2\">\n            <h3 class=\"font-semibold text-gray-800\">\n              {{ project.title || project.name }}\n            </h3>\n            <span :class=\"['status-badge', getStatusClass(project.status)]\">\n              {{ project.status }}\n            </span>\n          </div>\n          <div class=\"text-sm text-gray-500 mb-3\">\n            {{ formatDate(project.start_date) }} - {{ formatDate(project.end_date) }}\n          </div>\n          <div\n            v-if=\"project.budget_amount\"\n            class=\"text-sm text-gray-600\"\n          >\n            Budget: {{ formatCurrency(project.budget_amount) }}\n          </div>\n        </div>\n      </div>\n\n      <!-- FAB -->\n      <ion-fab\n        slot=\"fixed\"\n        vertical=\"bottom\"\n        horizontal=\"end\"\n      >\n        <ion-fab-button @click=\"createProject\">\n          <ion-icon :icon=\"addOutline\" />\n        </ion-fab-button>\n      </ion-fab>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, inject } from \"vue\"\nimport { useRouter } from \"vue-router\"\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonSearchbar,\n  IonRefresher,\n  IonRefresherContent,\n  IonButton,\n  IonButtons,\n  IonBackButton,\n  IonIcon,\n  IonFab,\n  IonFabButton,\n} from \"@ionic/vue\"\nimport { addOutline, folderOutline } from \"ionicons/icons\"\nimport { createResource } from \"frappe-ui\"\n\nconst router = useRouter()\nconst $dayjs = inject(\"$dayjs\")\n\nconst loading = ref(true)\nconst searchQuery = ref(\"\")\nconst projects = ref([])\n\nconst projectsResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_user_projects\",\n  auto: false,\n})\n\nconst filteredProjects = computed(() => {\n  if (!searchQuery.value) return projects.value\n  const query = searchQuery.value.toLowerCase()\n  return projects.value.filter(\n    (p) =>\n      (p.title || p.name).toLowerCase().includes(query) ||\n      (p.status || \"\").toLowerCase().includes(query)\n  )\n})\n\nasync function loadData() {\n  loading.value = true\n  try {\n    await projectsResource.fetch()\n    projects.value = projectsResource.data || []\n  } catch (error) {\n    console.error(\"Error loading projects:\", error)\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction handleRefresh(event) {\n  loadData().finally(() => {\n    event.target.complete()\n  })\n}\n\nfunction formatDate(dateStr) {\n  if (!dateStr) return \"-\"\n  return $dayjs(dateStr).format(\"MMM D, YYYY\")\n}\n\nfunction formatCurrency(amount) {\n  return new Intl.NumberFormat(\"en-IN\", {\n    style: \"currency\",\n    currency: \"INR\",\n  }).format(amount)\n}\n\nfunction getStatusClass(status) {\n  const map = {\n    Active: \"active\",\n    Planning: \"planning\",\n    Completed: \"completed\",\n    \"On Hold\": \"on-hold\",\n    Cancelled: \"cancelled\",\n  }\n  return map[status] || \"\"\n}\n\nfunction goToProject(id) {\n  router.push(`/smart-pro/project/${encodeURIComponent(id)}`)\n}\n\nfunction createProject() {\n  router.push(\"/smart-pro/project/new\")\n}\n\nonMounted(() => {\n  loadData()\n})\n</script>\n"],"names":["router","useRouter","$dayjs","inject","loading","ref","searchQuery","projects","projectsResource","createResource","filteredProjects","computed","query","p","loadData","__async","error","handleRefresh","event","formatDate","dateStr","formatCurrency","amount","getStatusClass","status","goToProject","id","createProject","onMounted","_createBlock","_unref","IonPage","_createVNode","IonHeader","IonToolbar","IonButtons","IonBackButton","IonTitle","_cache","IonButton","IonIcon","addOutline","IonSearchbar","$event","IonContent","IonRefresher","IonRefresherContent","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","i","_createElementVNode","_hoisted_2","folderOutline","_hoisted_3","_toDisplayString","_hoisted_4","project","_hoisted_6","_hoisted_7","_normalizeClass","_hoisted_8","_hoisted_9","IonFab","IonFabButton"],"mappings":"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"}