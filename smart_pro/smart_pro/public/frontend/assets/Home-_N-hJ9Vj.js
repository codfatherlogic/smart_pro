var C=(x,y,p)=>new Promise((m,u)=>{var v=o=>{try{f(p.next(o))}catch(_){u(_)}},g=o=>{try{f(p.throw(o))}catch(_){u(_)}},f=o=>o.done?m(o.value):Promise.resolve(o.value).then(v,g);f((p=p.apply(x,y)).next())});import{a as k,E as I,F as A,e as B,l as r,G as H,i as S,f as l,j as i,k as d,D as h,H as s,I as c,J as n,K as R,L as T,M as P,N as z}from"./frappe-ui-BxXHPJLj.js";import{g as Y,h as E,i as V,j as F,k as L,l as O,m as w,f as U}from"./index-CDDuZJGk.js";const W={class:"p-4"},G={class:"grid grid-cols-2 gap-4 mb-6"},J={class:"app-card p-4"},K={class:"text-3xl font-bold text-primary-500"},q={class:"app-card p-4"},Q={class:"text-3xl font-bold text-orange-500"},X={class:"app-card mb-6"},Z={class:"app-card-header flex justify-between items-center"},ss={key:0,class:"p-4"},ts={key:1,class:"empty-state py-8"},es={key:2},as=["onClick"],ls={class:"flex-1"},os={class:"font-medium text-gray-800"},ns={class:"text-sm text-gray-500"},rs={class:"app-card"},is={class:"app-card-header flex justify-between items-center"},ds={key:0,class:"p-4"},cs={key:1,class:"empty-state py-8"},us={key:2},ps=["onClick"],ms={class:"flex-1"},vs={class:"font-medium text-gray-800"},fs={class:"text-sm text-gray-500"},_s={class:"progress-bar mt-2"},hs={__name:"Home",setup(x){const y=H(),p=S("$dayjs"),m=k(!0),u=k([]),v=k([]),g=k({projects:0,tasks:0}),f=I({url:"smart_pro.smart_pro.api.projects.get_user_projects",auto:!1}),o=I({url:"smart_pro.smart_pro.api.projects.get_user_tasks",auto:!1});function _(){return C(this,null,function*(){m.value=!0;try{yield Promise.all([f.fetch(),o.fetch()]),u.value=f.data||[],v.value=o.data||[],g.value={projects:u.value.filter(e=>e.status==="Active").length,tasks:v.value.filter(e=>e.status!=="Completed").length}}catch(e){console.error("Error loading data:",e)}finally{m.value=!1}})}function D(e){_().finally(()=>{e.target.complete()})}function b(e){return e?p(e).format("MMM D, YYYY"):"-"}function j(e){return{Active:"active",Planning:"planning",Completed:"completed","On Hold":"on-hold",Cancelled:"cancelled",Open:"planning",Working:"on-hold"}[e]||""}function M(e){y.push(`/smart-pro/project/${encodeURIComponent(e)}`)}function N(e){y.push(`/smart-pro/task/${encodeURIComponent(e)}`)}return A(()=>{_()}),(e,t)=>(l(),B(r(U),null,{default:i(()=>[d(r(Y),null,{default:i(()=>[d(r(E),null,{default:i(()=>[d(r(V),null,{default:i(()=>[...t[0]||(t[0]=[h("Smart Pro",-1)])]),_:1})]),_:1})]),_:1}),d(r(F),{fullscreen:!0},{default:i(()=>[d(r(L),{slot:"fixed",onIonRefresh:D},{default:i(()=>[d(r(O))]),_:1}),s("div",W,[t[11]||(t[11]=s("div",{class:"mb-6"},[s("h1",{class:"text-2xl font-bold text-gray-800"},"Welcome back!"),s("p",{class:"text-gray-500"},"Here's your overview")],-1)),s("div",G,[s("div",J,[s("div",K,c(g.value.projects),1),t[1]||(t[1]=s("div",{class:"text-sm text-gray-500"},"Active Projects",-1))]),s("div",q,[s("div",Q,c(g.value.tasks),1),t[2]||(t[2]=s("div",{class:"text-sm text-gray-500"},"Pending Tasks",-1))])]),s("div",X,[s("div",Z,[t[4]||(t[4]=s("span",null,"Recent Projects",-1)),d(r(w),{fill:"clear",size:"small","router-link":"/smart-pro/projects"},{default:i(()=>[...t[3]||(t[3]=[h(" See All ",-1)])]),_:1})]),m.value?(l(),n("div",ss,[...t[5]||(t[5]=[s("div",{class:"skeleton h-16 mb-3"},null,-1),s("div",{class:"skeleton h-16 mb-3"},null,-1)])])):u.value.length===0?(l(),n("div",ts,[...t[6]||(t[6]=[s("div",{class:"empty-state-title"},"No projects yet",-1),s("div",{class:"empty-state-description"},"Create your first project to get started",-1)])])):(l(),n("div",es,[(l(!0),n(R,null,T(u.value.slice(0,3),a=>(l(),n("div",{key:a.name,class:"app-list-item",onClick:$=>M(a.name)},[s("div",ls,[s("div",os,c(a.title||a.name),1),s("div",ns,c(b(a.end_date)),1)]),s("span",{class:P(["status-badge",j(a.status)])},c(a.status),3)],8,as))),128))]))]),s("div",rs,[s("div",is,[t[8]||(t[8]=s("span",null,"My Tasks",-1)),d(r(w),{fill:"clear",size:"small","router-link":"/smart-pro/tasks"},{default:i(()=>[...t[7]||(t[7]=[h(" See All ",-1)])]),_:1})]),m.value?(l(),n("div",ds,[...t[9]||(t[9]=[s("div",{class:"skeleton h-16 mb-3"},null,-1),s("div",{class:"skeleton h-16 mb-3"},null,-1)])])):v.value.length===0?(l(),n("div",cs,[...t[10]||(t[10]=[s("div",{class:"empty-state-title"},"No tasks assigned",-1),s("div",{class:"empty-state-description"},"Tasks assigned to you will appear here",-1)])])):(l(),n("div",us,[(l(!0),n(R,null,T(v.value.slice(0,3),a=>(l(),n("div",{key:a.name,class:"app-list-item",onClick:$=>N(a.name)},[s("div",ms,[s("div",vs,c(a.title||a.name),1),s("div",fs,"Due: "+c(b(a.due_date)),1),s("div",_s,[s("div",{class:"progress-bar-fill",style:z({width:(a.progress||0)+"%"})},null,4)])]),s("span",{class:P(["status-badge",j(a.status)])},c(a.status),3)],8,ps))),128))]))])])]),_:1})]),_:1}))}};export{hs as default};
//# sourceMappingURL=Home-_N-hJ9Vj.js.map
