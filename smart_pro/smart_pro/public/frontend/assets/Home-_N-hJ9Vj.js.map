{"version":3,"file":"Home-_N-hJ9Vj.js","sources":["../../../../frontend/src/views/Home.vue"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header>\n      <ion-toolbar>\n        <ion-title>Smart Pro</ion-title>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\">\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"handleRefresh\">\n        <ion-refresher-content></ion-refresher-content>\n      </ion-refresher>\n\n      <div class=\"p-4\">\n        <!-- Welcome Section -->\n        <div class=\"mb-6\">\n          <h1 class=\"text-2xl font-bold text-gray-800\">Welcome back!</h1>\n          <p class=\"text-gray-500\">Here's your overview</p>\n        </div>\n\n        <!-- Stats Cards -->\n        <div class=\"grid grid-cols-2 gap-4 mb-6\">\n          <div class=\"app-card p-4\">\n            <div class=\"text-3xl font-bold text-primary-500\">{{ stats.projects }}</div>\n            <div class=\"text-sm text-gray-500\">Active Projects</div>\n          </div>\n          <div class=\"app-card p-4\">\n            <div class=\"text-3xl font-bold text-orange-500\">{{ stats.tasks }}</div>\n            <div class=\"text-sm text-gray-500\">Pending Tasks</div>\n          </div>\n        </div>\n\n        <!-- Recent Projects -->\n        <div class=\"app-card mb-6\">\n          <div class=\"app-card-header flex justify-between items-center\">\n            <span>Recent Projects</span>\n            <ion-button fill=\"clear\" size=\"small\" router-link=\"/smart-pro/projects\">\n              See All\n            </ion-button>\n          </div>\n          <div v-if=\"loading\" class=\"p-4\">\n            <div class=\"skeleton h-16 mb-3\"></div>\n            <div class=\"skeleton h-16 mb-3\"></div>\n          </div>\n          <div v-else-if=\"projects.length === 0\" class=\"empty-state py-8\">\n            <div class=\"empty-state-title\">No projects yet</div>\n            <div class=\"empty-state-description\">Create your first project to get started</div>\n          </div>\n          <div v-else>\n            <div\n              v-for=\"project in projects.slice(0, 3)\"\n              :key=\"project.name\"\n              class=\"app-list-item\"\n              @click=\"goToProject(project.name)\"\n            >\n              <div class=\"flex-1\">\n                <div class=\"font-medium text-gray-800\">{{ project.title || project.name }}</div>\n                <div class=\"text-sm text-gray-500\">{{ formatDate(project.end_date) }}</div>\n              </div>\n              <span :class=\"['status-badge', getStatusClass(project.status)]\">\n                {{ project.status }}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <!-- My Tasks -->\n        <div class=\"app-card\">\n          <div class=\"app-card-header flex justify-between items-center\">\n            <span>My Tasks</span>\n            <ion-button fill=\"clear\" size=\"small\" router-link=\"/smart-pro/tasks\">\n              See All\n            </ion-button>\n          </div>\n          <div v-if=\"loading\" class=\"p-4\">\n            <div class=\"skeleton h-16 mb-3\"></div>\n            <div class=\"skeleton h-16 mb-3\"></div>\n          </div>\n          <div v-else-if=\"tasks.length === 0\" class=\"empty-state py-8\">\n            <div class=\"empty-state-title\">No tasks assigned</div>\n            <div class=\"empty-state-description\">Tasks assigned to you will appear here</div>\n          </div>\n          <div v-else>\n            <div\n              v-for=\"task in tasks.slice(0, 3)\"\n              :key=\"task.name\"\n              class=\"app-list-item\"\n              @click=\"goToTask(task.name)\"\n            >\n              <div class=\"flex-1\">\n                <div class=\"font-medium text-gray-800\">{{ task.title || task.name }}</div>\n                <div class=\"text-sm text-gray-500\">Due: {{ formatDate(task.due_date) }}</div>\n                <div class=\"progress-bar mt-2\">\n                  <div\n                    class=\"progress-bar-fill\"\n                    :style=\"{ width: (task.progress || 0) + '%' }\"\n                  ></div>\n                </div>\n              </div>\n              <span :class=\"['status-badge', getStatusClass(task.status)]\">\n                {{ task.status }}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport { ref, onMounted, inject } from \"vue\"\nimport { useRouter } from \"vue-router\"\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonRefresher,\n  IonRefresherContent,\n  IonButton,\n} from \"@ionic/vue\"\nimport { createResource } from \"frappe-ui\"\n\nconst router = useRouter()\nconst $dayjs = inject(\"$dayjs\")\n\nconst loading = ref(true)\nconst projects = ref([])\nconst tasks = ref([])\nconst stats = ref({ projects: 0, tasks: 0 })\n\nconst projectsResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_user_projects\",\n  auto: false,\n})\n\nconst tasksResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_user_tasks\",\n  auto: false,\n})\n\nasync function loadData() {\n  loading.value = true\n  try {\n    await Promise.all([projectsResource.fetch(), tasksResource.fetch()])\n    projects.value = projectsResource.data || []\n    tasks.value = tasksResource.data || []\n    stats.value = {\n      projects: projects.value.filter((p) => p.status === \"Active\").length,\n      tasks: tasks.value.filter((t) => t.status !== \"Completed\").length,\n    }\n  } catch (error) {\n    console.error(\"Error loading data:\", error)\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction handleRefresh(event) {\n  loadData().finally(() => {\n    event.target.complete()\n  })\n}\n\nfunction formatDate(dateStr) {\n  if (!dateStr) return \"-\"\n  return $dayjs(dateStr).format(\"MMM D, YYYY\")\n}\n\nfunction getStatusClass(status) {\n  const map = {\n    Active: \"active\",\n    Planning: \"planning\",\n    Completed: \"completed\",\n    \"On Hold\": \"on-hold\",\n    Cancelled: \"cancelled\",\n    Open: \"planning\",\n    Working: \"on-hold\",\n  }\n  return map[status] || \"\"\n}\n\nfunction goToProject(id) {\n  router.push(`/smart-pro/project/${encodeURIComponent(id)}`)\n}\n\nfunction goToTask(id) {\n  router.push(`/smart-pro/task/${encodeURIComponent(id)}`)\n}\n\nonMounted(() => {\n  loadData()\n})\n</script>\n"],"names":["router","useRouter","$dayjs","inject","loading","ref","projects","tasks","stats","projectsResource","createResource","tasksResource","loadData","__async","p","t","error","handleRefresh","event","formatDate","dateStr","getStatusClass","status","goToProject","id","goToTask","onMounted","_createBlock","_unref","IonPage","_createVNode","IonHeader","IonToolbar","IonTitle","_cache","IonContent","IonRefresher","IonRefresherContent","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","IonButton","_openBlock","_createElementBlock","_hoisted_9","_hoisted_10","_hoisted_11","_Fragment","_renderList","project","$event","_hoisted_13","_hoisted_14","_hoisted_15","_normalizeClass","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","task","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_normalizeStyle"],"mappings":"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"}