{"version":3,"file":"Profile-DcVnR-aS.js","sources":["../../../../frontend/src/views/Profile.vue"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header>\n      <ion-toolbar>\n        <ion-title>Profile</ion-title>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\">\n      <div class=\"p-4\">\n        <!-- User Info Card -->\n        <div class=\"app-card p-6 mb-6 text-center\">\n          <div\n            class=\"w-20 h-20 rounded-full bg-primary-100 flex items-center justify-center mx-auto mb-4\"\n          >\n            <span class=\"text-3xl font-bold text-primary-600\">\n              {{ userInitials }}\n            </span>\n          </div>\n          <h2 class=\"text-xl font-semibold text-gray-800\">{{ userName }}</h2>\n          <p class=\"text-gray-500\">{{ userEmail }}</p>\n        </div>\n\n        <!-- Stats -->\n        <div class=\"grid grid-cols-3 gap-4 mb-6\">\n          <div class=\"app-card p-4 text-center\">\n            <div class=\"text-2xl font-bold text-primary-500\">{{ stats.projects }}</div>\n            <div class=\"text-xs text-gray-500\">Projects</div>\n          </div>\n          <div class=\"app-card p-4 text-center\">\n            <div class=\"text-2xl font-bold text-orange-500\">{{ stats.tasks }}</div>\n            <div class=\"text-xs text-gray-500\">Tasks</div>\n          </div>\n          <div class=\"app-card p-4 text-center\">\n            <div class=\"text-2xl font-bold text-green-500\">{{ stats.completed }}</div>\n            <div class=\"text-xs text-gray-500\">Done</div>\n          </div>\n        </div>\n\n        <!-- Menu Items -->\n        <div class=\"app-card\">\n          <ion-list lines=\"full\">\n            <ion-item button @click=\"openSettings\">\n              <ion-icon :icon=\"settingsOutline\" slot=\"start\"></ion-icon>\n              <ion-label>Settings</ion-label>\n              <ion-icon :icon=\"chevronForwardOutline\" slot=\"end\"></ion-icon>\n            </ion-item>\n\n            <ion-item button @click=\"openHelp\">\n              <ion-icon :icon=\"helpCircleOutline\" slot=\"start\"></ion-icon>\n              <ion-label>Help & Support</ion-label>\n              <ion-icon :icon=\"chevronForwardOutline\" slot=\"end\"></ion-icon>\n            </ion-item>\n\n            <ion-item button @click=\"openAbout\">\n              <ion-icon :icon=\"informationCircleOutline\" slot=\"start\"></ion-icon>\n              <ion-label>About</ion-label>\n              <ion-icon :icon=\"chevronForwardOutline\" slot=\"end\"></ion-icon>\n            </ion-item>\n\n            <ion-item button @click=\"logout\" class=\"text-red-500\">\n              <ion-icon :icon=\"logOutOutline\" slot=\"start\" color=\"danger\"></ion-icon>\n              <ion-label color=\"danger\">Logout</ion-label>\n            </ion-item>\n          </ion-list>\n        </div>\n\n        <!-- App Version -->\n        <div class=\"text-center mt-6 text-sm text-gray-400\">\n          Smart Pro v1.0.0\n        </div>\n      </div>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from \"vue\"\nimport { useRouter } from \"vue-router\"\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonList,\n  IonItem,\n  IonLabel,\n  IonIcon,\n  alertController,\n  loadingController,\n} from \"@ionic/vue\"\nimport {\n  settingsOutline,\n  helpCircleOutline,\n  informationCircleOutline,\n  logOutOutline,\n  chevronForwardOutline,\n} from \"ionicons/icons\"\nimport { createResource, call } from \"frappe-ui\"\n\nconst router = useRouter()\n\nconst userName = ref(\"\")\nconst userEmail = ref(\"\")\nconst stats = ref({ projects: 0, tasks: 0, completed: 0 })\n\nconst userInitials = computed(() => {\n  if (!userName.value) return \"?\"\n  return userName.value\n    .split(\" \")\n    .map((n) => n[0])\n    .join(\"\")\n    .toUpperCase()\n    .slice(0, 2)\n})\n\nconst userResource = createResource({\n  url: \"frappe.auth.get_logged_user\",\n  auto: false,\n})\n\nconst projectsResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_user_projects\",\n  auto: false,\n})\n\nconst tasksResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_user_tasks\",\n  auto: false,\n})\n\nasync function loadUserData() {\n  try {\n    await userResource.fetch()\n    userEmail.value = userResource.data || \"\"\n\n    // Get full name\n    if (userEmail.value) {\n      const userDoc = await call(\"frappe.client.get_value\", {\n        doctype: \"User\",\n        filters: { name: userEmail.value },\n        fieldname: \"full_name\",\n      })\n      userName.value = userDoc?.full_name || userEmail.value\n    }\n\n    // Load stats\n    await Promise.all([projectsResource.fetch(), tasksResource.fetch()])\n\n    const projects = projectsResource.data || []\n    const tasks = tasksResource.data || []\n\n    stats.value = {\n      projects: projects.length,\n      tasks: tasks.length,\n      completed: tasks.filter((t) => t.status === \"Completed\").length,\n    }\n  } catch (error) {\n    console.error(\"Error loading user data:\", error)\n  }\n}\n\nasync function openSettings() {\n  const alert = await alertController.create({\n    header: \"Settings\",\n    message: \"Settings will be available in a future update.\",\n    buttons: [\"OK\"],\n  })\n  await alert.present()\n}\n\nasync function openHelp() {\n  const alert = await alertController.create({\n    header: \"Help & Support\",\n    message: \"For support, please contact your administrator.\",\n    buttons: [\"OK\"],\n  })\n  await alert.present()\n}\n\nasync function openAbout() {\n  const alert = await alertController.create({\n    header: \"About Smart Pro\",\n    message: \"Smart Pro is a project management application built on Frappe Framework.\",\n    buttons: [\"OK\"],\n  })\n  await alert.present()\n}\n\nasync function logout() {\n  const alert = await alertController.create({\n    header: \"Logout\",\n    message: \"Are you sure you want to logout?\",\n    buttons: [\n      {\n        text: \"Cancel\",\n        role: \"cancel\",\n      },\n      {\n        text: \"Logout\",\n        role: \"destructive\",\n        handler: async () => {\n          const loading = await loadingController.create({\n            message: \"Logging out...\",\n          })\n          await loading.present()\n\n          try {\n            await call(\"logout\")\n            router.push(\"/smart-pro/login\")\n          } catch (error) {\n            console.error(\"Logout error:\", error)\n          } finally {\n            await loading.dismiss()\n          }\n        },\n      },\n    ],\n  })\n  await alert.present()\n}\n\nonMounted(() => {\n  loadUserData()\n})\n</script>\n"],"names":["router","useRouter","userName","ref","userEmail","stats","userInitials","computed","n","userResource","createResource","projectsResource","tasksResource","loadUserData","__async","userDoc","call","projects","tasks","t","error","openSettings","alertController","openHelp","openAbout","logout","loading","loadingController","onMounted","_createBlock","_unref","IonPage","_createVNode","IonHeader","IonToolbar","IonTitle","_cache","IonContent","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","IonList","IonItem","IonIcon","settingsOutline","IonLabel","chevronForwardOutline","helpCircleOutline","informationCircleOutline","logOutOutline"],"mappings":"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"}