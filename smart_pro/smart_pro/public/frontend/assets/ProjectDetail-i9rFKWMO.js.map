{"version":3,"file":"ProjectDetail-i9rFKWMO.js","sources":["../../../../frontend/src/views/ProjectDetail.vue"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header>\n      <ion-toolbar>\n        <ion-buttons slot=\"start\">\n          <ion-back-button default-href=\"/smart-pro/projects\"></ion-back-button>\n        </ion-buttons>\n        <ion-title>Project Details</ion-title>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\">\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"handleRefresh\">\n        <ion-refresher-content></ion-refresher-content>\n      </ion-refresher>\n\n      <!-- Loading State -->\n      <div v-if=\"loading\" class=\"p-4\">\n        <div class=\"skeleton h-8 w-3/4 mb-4\"></div>\n        <div class=\"skeleton h-4 w-1/2 mb-6\"></div>\n        <div class=\"skeleton h-24 w-full mb-4\"></div>\n        <div class=\"skeleton h-32 w-full\"></div>\n      </div>\n\n      <!-- Error State -->\n      <div v-else-if=\"error\" class=\"empty-state h-full\">\n        <div class=\"empty-state-title\">Error loading project</div>\n        <div class=\"empty-state-description\">{{ error }}</div>\n        <ion-button class=\"mt-4\" @click=\"loadData\">Retry</ion-button>\n      </div>\n\n      <!-- Project Details -->\n      <div v-else-if=\"project\" class=\"p-4\">\n        <!-- Header -->\n        <div class=\"mb-6\">\n          <div class=\"flex justify-between items-start mb-2\">\n            <h1 class=\"text-2xl font-bold text-gray-800\">{{ project.title }}</h1>\n            <span :class=\"['status-badge', getStatusClass(project.status)]\">\n              {{ project.status }}\n            </span>\n          </div>\n          <p v-if=\"project.description\" class=\"text-gray-600\">\n            {{ project.description }}\n          </p>\n        </div>\n\n        <!-- Info Cards -->\n        <div class=\"grid grid-cols-2 gap-4 mb-6\">\n          <div class=\"app-card p-4\">\n            <div class=\"text-xs text-gray-500 mb-1\">Start Date</div>\n            <div class=\"font-medium\">{{ formatDate(project.start_date) }}</div>\n          </div>\n          <div class=\"app-card p-4\">\n            <div class=\"text-xs text-gray-500 mb-1\">End Date</div>\n            <div class=\"font-medium\">{{ formatDate(project.end_date) }}</div>\n          </div>\n          <div v-if=\"project.project_manager\" class=\"app-card p-4\">\n            <div class=\"text-xs text-gray-500 mb-1\">Manager</div>\n            <div class=\"font-medium\">{{ project.project_manager }}</div>\n          </div>\n          <div v-if=\"project.budget_amount\" class=\"app-card p-4\">\n            <div class=\"text-xs text-gray-500 mb-1\">Budget</div>\n            <div class=\"font-medium\">{{ formatCurrency(project.budget_amount) }}</div>\n          </div>\n        </div>\n\n        <!-- Tasks Section -->\n        <div class=\"app-card mb-6\">\n          <div class=\"app-card-header flex justify-between items-center\">\n            <span>Tasks ({{ tasks.length }})</span>\n          </div>\n          <div v-if=\"tasks.length === 0\" class=\"p-4 text-center text-gray-500\">\n            No tasks for this project\n          </div>\n          <div v-else>\n            <div\n              v-for=\"task in tasks\"\n              :key=\"task.name\"\n              class=\"app-list-item\"\n              @click=\"goToTask(task.name)\"\n            >\n              <div class=\"flex-1\">\n                <div class=\"font-medium text-gray-800\">{{ task.title || task.name }}</div>\n                <div class=\"text-sm text-gray-500\">Due: {{ formatDate(task.due_date) }}</div>\n              </div>\n              <span :class=\"['status-badge', getStatusClass(task.status)]\">\n                {{ task.status }}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Team Section -->\n        <div v-if=\"assignments.length > 0\" class=\"app-card\">\n          <div class=\"app-card-header\">\n            <span>Team ({{ assignments.length }})</span>\n          </div>\n          <div>\n            <div v-for=\"member in assignments\" :key=\"member.name\" class=\"app-list-item\">\n              <div class=\"flex items-center\">\n                <div\n                  class=\"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center mr-3\"\n                >\n                  <span class=\"text-sm font-medium text-primary-600\">\n                    {{ getInitials(member.employee_name) }}\n                  </span>\n                </div>\n                <div>\n                  <div class=\"font-medium text-gray-800\">{{ member.employee_name }}</div>\n                  <div class=\"text-sm text-gray-500\">{{ member.role }}</div>\n                </div>\n              </div>\n              <div class=\"text-sm text-gray-500\">{{ member.allocation_percentage }}%</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport { ref, onMounted, inject } from \"vue\"\nimport { useRoute, useRouter } from \"vue-router\"\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonButtons,\n  IonBackButton,\n  IonButton,\n  IonRefresher,\n  IonRefresherContent,\n} from \"@ionic/vue\"\nimport { createResource } from \"frappe-ui\"\n\nconst route = useRoute()\nconst router = useRouter()\nconst $dayjs = inject(\"$dayjs\")\n\nconst loading = ref(true)\nconst error = ref(\"\")\nconst project = ref(null)\nconst tasks = ref([])\nconst assignments = ref([])\n\nconst projectResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_project_details\",\n  auto: false,\n})\n\nconst tasksResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_project_tasks\",\n  auto: false,\n})\n\nconst assignmentsResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_employee_assignments\",\n  auto: false,\n})\n\nasync function loadData() {\n  const projectId = route.params.id\n  if (!projectId) {\n    error.value = \"Project not found\"\n    return\n  }\n\n  loading.value = true\n  error.value = \"\"\n\n  try {\n    await Promise.all([\n      projectResource.fetch({ project_name: projectId }),\n      tasksResource.fetch({ project_name: projectId }),\n      assignmentsResource.fetch({ project_name: projectId }),\n    ])\n\n    project.value = projectResource.data\n    tasks.value = tasksResource.data || []\n    assignments.value = assignmentsResource.data || []\n  } catch (err) {\n    console.error(\"Error loading project:\", err)\n    error.value = err.message || \"Failed to load project\"\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction handleRefresh(event) {\n  loadData().finally(() => {\n    event.target.complete()\n  })\n}\n\nfunction formatDate(dateStr) {\n  if (!dateStr) return \"-\"\n  return $dayjs(dateStr).format(\"MMM D, YYYY\")\n}\n\nfunction formatCurrency(amount) {\n  return new Intl.NumberFormat(\"en-IN\", {\n    style: \"currency\",\n    currency: \"INR\",\n  }).format(amount)\n}\n\nfunction getStatusClass(status) {\n  const map = {\n    Active: \"active\",\n    Planning: \"planning\",\n    Completed: \"completed\",\n    \"On Hold\": \"on-hold\",\n    Cancelled: \"cancelled\",\n    Open: \"planning\",\n    Working: \"on-hold\",\n  }\n  return map[status] || \"\"\n}\n\nfunction getInitials(name) {\n  if (!name) return \"?\"\n  return name\n    .split(\" \")\n    .map((n) => n[0])\n    .join(\"\")\n    .toUpperCase()\n    .slice(0, 2)\n}\n\nfunction goToTask(id) {\n  router.push(`/smart-pro/task/${encodeURIComponent(id)}`)\n}\n\nonMounted(() => {\n  loadData()\n})\n</script>\n"],"names":["route","useRoute","router","useRouter","$dayjs","inject","loading","ref","error","project","tasks","assignments","projectResource","createResource","tasksResource","assignmentsResource","loadData","__async","projectId","err","handleRefresh","event","formatDate","dateStr","formatCurrency","amount","getStatusClass","status","getInitials","name","n","goToTask","id","onMounted","_createBlock","_unref","IonPage","_createVNode","IonHeader","IonToolbar","IonButtons","IonBackButton","IonTitle","_cache","IonContent","IonRefresher","IonRefresherContent","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","IonButton","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_normalizeClass","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_Fragment","_renderList","task","$event","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","member","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33"],"mappings":"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"}