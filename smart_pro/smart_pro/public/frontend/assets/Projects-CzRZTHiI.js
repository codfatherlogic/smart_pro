var g=(b,h,d)=>new Promise((p,u)=>{var _=l=>{try{f(d.next(l))}catch(v){u(v)}},y=l=>{try{f(d.throw(l))}catch(v){u(v)}},f=l=>l.done?p(l.value):Promise.resolve(l.value).then(_,y);f((d=d.apply(b,h)).next())});import{a as k,E as M,c as O,F as Y,e as w,j as n,l as e,G as $,i as E,f as c,k as s,D as x,J as i,K as P,L as R,H as r,O as B,I as m,M as H}from"./frappe-ui-BxXHPJLj.js";import{g as S,h as N,i as q,n as z,m as V,d as I,o as K,j as U,k as A,l as G,p as J,q as Q,f as W,r as X}from"./index-CDDuZJGk.js";import{a as T,f as Z}from"./index-DEyDSjtY.js";const ee={key:0,class:"p-4"},te={key:1,class:"empty-state h-full"},ae={class:"empty-state-description"},se={key:2,class:"p-4"},oe=["onClick"],ne={class:"flex justify-between items-start mb-2"},le={class:"font-semibold text-gray-800"},re={class:"text-sm text-gray-500 mb-3"},ue={key:0,class:"text-sm text-gray-600"},pe={__name:"Projects",setup(b){const h=$(),d=E("$dayjs"),p=k(!0),u=k(""),_=k([]),y=M({url:"smart_pro.smart_pro.api.projects.get_user_projects",auto:!1}),f=O(()=>{if(!u.value)return _.value;const t=u.value.toLowerCase();return _.value.filter(a=>(a.title||a.name).toLowerCase().includes(t)||(a.status||"").toLowerCase().includes(t))});function l(){return g(this,null,function*(){p.value=!0;try{yield y.fetch(),_.value=y.data||[]}catch(t){console.error("Error loading projects:",t)}finally{p.value=!1}})}function v(t){l().finally(()=>{t.target.complete()})}function j(t){return t?d(t).format("MMM D, YYYY"):"-"}function D(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t)}function F(t){return{Active:"active",Planning:"planning",Completed:"completed","On Hold":"on-hold",Cancelled:"cancelled"}[t]||""}function L(t){h.push(`/smart-pro/project/${encodeURIComponent(t)}`)}function C(){return g(this,null,function*(){yield(yield X.create({header:"Create Project",message:"To create a new project, please use the desktop application.",buttons:["OK"]})).present()})}return Y(()=>{l()}),(t,a)=>(c(),w(e(W),null,{default:n(()=>[s(e(S),null,{default:n(()=>[s(e(N),null,{default:n(()=>[s(e(q),null,{default:n(()=>[...a[1]||(a[1]=[x("Projects",-1)])]),_:1}),s(e(z),{slot:"end"},{default:n(()=>[s(e(V),{onClick:C},{default:n(()=>[s(e(I),{icon:e(T)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),s(e(N),null,{default:n(()=>[s(e(K),{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value=o),placeholder:"Search projects...",debounce:300},null,8,["modelValue"])]),_:1})]),_:1}),s(e(U),{fullscreen:!0},{default:n(()=>[s(e(A),{slot:"fixed",onIonRefresh:v},{default:n(()=>[s(e(G))]),_:1}),p.value?(c(),i("div",ee,[(c(),i(P,null,R(5,o=>r("div",{key:o,class:"app-card mb-4 p-4"},[...a[2]||(a[2]=[r("div",{class:"skeleton h-5 w-3/4 mb-2"},null,-1),r("div",{class:"skeleton h-4 w-1/2 mb-2"},null,-1),r("div",{class:"skeleton h-3 w-full"},null,-1)])])),64))])):f.value.length===0?(c(),i("div",te,[s(e(I),{icon:e(Z),class:"empty-state-icon"},null,8,["icon"]),a[4]||(a[4]=r("div",{class:"empty-state-title"},"No projects found",-1)),r("div",ae,m(u.value?"Try a different search term":"Create your first project"),1),u.value?B("",!0):(c(),w(e(V),{key:0,class:"mt-4",onClick:C},{default:n(()=>[...a[3]||(a[3]=[x(" Create Project ",-1)])]),_:1}))])):(c(),i("div",se,[(c(!0),i(P,null,R(f.value,o=>(c(),i("div",{key:o.name,class:"app-card mb-4 p-4",onClick:ce=>L(o.name)},[r("div",ne,[r("h3",le,m(o.title||o.name),1),r("span",{class:H(["status-badge",F(o.status)])},m(o.status),3)]),r("div",re,m(j(o.start_date))+" - "+m(j(o.end_date)),1),o.budget_amount?(c(),i("div",ue," Budget: "+m(D(o.budget_amount)),1)):B("",!0)],8,oe))),128))])),s(e(J),{vertical:"bottom",horizontal:"end",slot:"fixed"},{default:n(()=>[s(e(Q),{onClick:C},{default:n(()=>[s(e(I),{icon:e(T)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{pe as default};
//# sourceMappingURL=Projects-CzRZTHiI.js.map
