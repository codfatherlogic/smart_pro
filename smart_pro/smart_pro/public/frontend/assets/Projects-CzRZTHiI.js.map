{"version":3,"file":"Projects-CzRZTHiI.js","sources":["../../../../frontend/src/views/Projects.vue"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header>\n      <ion-toolbar>\n        <ion-title>Projects</ion-title>\n        <ion-buttons slot=\"end\">\n          <ion-button @click=\"createProject\">\n            <ion-icon :icon=\"addOutline\"></ion-icon>\n          </ion-button>\n        </ion-buttons>\n      </ion-toolbar>\n      <ion-toolbar>\n        <ion-searchbar\n          v-model=\"searchQuery\"\n          placeholder=\"Search projects...\"\n          :debounce=\"300\"\n        ></ion-searchbar>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\">\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"handleRefresh\">\n        <ion-refresher-content></ion-refresher-content>\n      </ion-refresher>\n\n      <!-- Loading State -->\n      <div v-if=\"loading\" class=\"p-4\">\n        <div v-for=\"i in 5\" :key=\"i\" class=\"app-card mb-4 p-4\">\n          <div class=\"skeleton h-5 w-3/4 mb-2\"></div>\n          <div class=\"skeleton h-4 w-1/2 mb-2\"></div>\n          <div class=\"skeleton h-3 w-full\"></div>\n        </div>\n      </div>\n\n      <!-- Empty State -->\n      <div v-else-if=\"filteredProjects.length === 0\" class=\"empty-state h-full\">\n        <ion-icon :icon=\"folderOutline\" class=\"empty-state-icon\"></ion-icon>\n        <div class=\"empty-state-title\">No projects found</div>\n        <div class=\"empty-state-description\">\n          {{ searchQuery ? \"Try a different search term\" : \"Create your first project\" }}\n        </div>\n        <ion-button v-if=\"!searchQuery\" class=\"mt-4\" @click=\"createProject\">\n          Create Project\n        </ion-button>\n      </div>\n\n      <!-- Projects List -->\n      <div v-else class=\"p-4\">\n        <div\n          v-for=\"project in filteredProjects\"\n          :key=\"project.name\"\n          class=\"app-card mb-4 p-4\"\n          @click=\"goToProject(project.name)\"\n        >\n          <div class=\"flex justify-between items-start mb-2\">\n            <h3 class=\"font-semibold text-gray-800\">{{ project.title || project.name }}</h3>\n            <span :class=\"['status-badge', getStatusClass(project.status)]\">\n              {{ project.status }}\n            </span>\n          </div>\n          <div class=\"text-sm text-gray-500 mb-3\">\n            {{ formatDate(project.start_date) }} - {{ formatDate(project.end_date) }}\n          </div>\n          <div v-if=\"project.budget_amount\" class=\"text-sm text-gray-600\">\n            Budget: {{ formatCurrency(project.budget_amount) }}\n          </div>\n        </div>\n      </div>\n\n      <!-- FAB -->\n      <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n        <ion-fab-button @click=\"createProject\">\n          <ion-icon :icon=\"addOutline\"></ion-icon>\n        </ion-fab-button>\n      </ion-fab>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, inject } from \"vue\"\nimport { useRouter } from \"vue-router\"\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonSearchbar,\n  IonRefresher,\n  IonRefresherContent,\n  IonButton,\n  IonButtons,\n  IonIcon,\n  IonFab,\n  IonFabButton,\n  alertController,\n} from \"@ionic/vue\"\nimport { addOutline, folderOutline } from \"ionicons/icons\"\nimport { createResource } from \"frappe-ui\"\n\nconst router = useRouter()\nconst $dayjs = inject(\"$dayjs\")\n\nconst loading = ref(true)\nconst searchQuery = ref(\"\")\nconst projects = ref([])\n\nconst projectsResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_user_projects\",\n  auto: false,\n})\n\nconst filteredProjects = computed(() => {\n  if (!searchQuery.value) return projects.value\n  const query = searchQuery.value.toLowerCase()\n  return projects.value.filter(\n    (p) =>\n      (p.title || p.name).toLowerCase().includes(query) ||\n      (p.status || \"\").toLowerCase().includes(query)\n  )\n})\n\nasync function loadData() {\n  loading.value = true\n  try {\n    await projectsResource.fetch()\n    projects.value = projectsResource.data || []\n  } catch (error) {\n    console.error(\"Error loading projects:\", error)\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction handleRefresh(event) {\n  loadData().finally(() => {\n    event.target.complete()\n  })\n}\n\nfunction formatDate(dateStr) {\n  if (!dateStr) return \"-\"\n  return $dayjs(dateStr).format(\"MMM D, YYYY\")\n}\n\nfunction formatCurrency(amount) {\n  return new Intl.NumberFormat(\"en-IN\", {\n    style: \"currency\",\n    currency: \"INR\",\n  }).format(amount)\n}\n\nfunction getStatusClass(status) {\n  const map = {\n    Active: \"active\",\n    Planning: \"planning\",\n    Completed: \"completed\",\n    \"On Hold\": \"on-hold\",\n    Cancelled: \"cancelled\",\n  }\n  return map[status] || \"\"\n}\n\nfunction goToProject(id) {\n  router.push(`/smart-pro/project/${encodeURIComponent(id)}`)\n}\n\nasync function createProject() {\n  const alert = await alertController.create({\n    header: \"Create Project\",\n    message: \"To create a new project, please use the desktop application.\",\n    buttons: [\"OK\"],\n  })\n  await alert.present()\n}\n\nonMounted(() => {\n  loadData()\n})\n</script>\n"],"names":["router","useRouter","$dayjs","inject","loading","ref","searchQuery","projects","projectsResource","createResource","filteredProjects","computed","query","p","loadData","__async","error","handleRefresh","event","formatDate","dateStr","formatCurrency","amount","getStatusClass","status","goToProject","id","createProject","alertController","onMounted","_createBlock","_unref","IonPage","_createVNode","IonHeader","IonToolbar","IonTitle","_cache","IonButtons","IonButton","IonIcon","addOutline","IonSearchbar","$event","IonContent","IonRefresher","IonRefresherContent","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","i","_createElementVNode","_hoisted_2","folderOutline","_hoisted_3","_toDisplayString","_hoisted_4","project","_hoisted_6","_hoisted_7","_normalizeClass","_hoisted_8","_hoisted_9","IonFab","IonFabButton"],"mappings":"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"}