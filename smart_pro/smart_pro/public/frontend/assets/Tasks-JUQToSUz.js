var I=(C,x,f)=>new Promise((_,u)=>{var c=r=>{try{p(f.next(r))}catch(v){u(v)}},y=r=>{try{p(f.throw(r))}catch(v){u(v)}},p=r=>r.done?_(r.value):Promise.resolve(r.value).then(c,y);p((f=f.apply(C,x)).next())});import{a as h,E as B,c as L,F as S,e as $,j as n,l as a,G as E,i as H,f as i,k as o,D as g,J as d,K as w,L as j,H as s,I as m,M as T,O as R,N as O}from"./frappe-ui-BxXHPJLj.js";import{g as z,h as N,i as F,s as U,t as k,e as b,j as A,k as G,l as J,d as K,f as W}from"./index-CDDuZJGk.js";import{c as q}from"./index-DEyDSjtY.js";const Q={key:0,class:"p-4"},X={key:1,class:"empty-state h-full"},Y={class:"empty-state-description"},Z={key:2,class:"p-4"},ee=["onClick"],te={class:"flex justify-between items-start mb-2"},se={class:"font-semibold text-gray-800 flex-1 pr-2"},le={class:"text-sm text-gray-500 mb-2"},ae={key:0},oe={class:"flex items-center justify-between text-sm"},ne={class:"text-gray-500"},re={class:"mt-3"},ue={class:"flex justify-between text-xs text-gray-500 mb-1"},ie={class:"progress-bar"},_e={__name:"Tasks",setup(C){const x=E(),f=H("$dayjs"),_=h(!0),u=h("all"),c=h([]),y=B({url:"smart_pro.smart_pro.api.projects.get_user_tasks",auto:!1}),p=L(()=>u.value==="all"?c.value:u.value==="pending"?c.value.filter(l=>l.status!=="Completed"):u.value==="completed"?c.value.filter(l=>l.status==="Completed"):c.value);function r(){return I(this,null,function*(){_.value=!0;try{yield y.fetch(),c.value=y.data||[]}catch(l){console.error("Error loading tasks:",l)}finally{_.value=!1}})}function v(l){r().finally(()=>{l.target.complete()})}function D(l){if(!l)return"-";const e=f(l);return e.isToday()?"Today":e.isTomorrow()?"Tomorrow":e.format("MMM D")}function M(l){return{Open:"planning",Working:"on-hold","Pending Review":"on-hold",Completed:"completed",Cancelled:"cancelled"}[l]||""}function V(l){return{Low:"text-green-600",Medium:"text-blue-600",High:"text-orange-600",Critical:"text-red-600"}[l]||"text-gray-600"}function P(l){x.push(`/smart-pro/task/${encodeURIComponent(l)}`)}return S(()=>{r()}),(l,e)=>(i(),$(a(W),null,{default:n(()=>[o(a(z),null,{default:n(()=>[o(a(N),null,{default:n(()=>[o(a(F),null,{default:n(()=>[...e[1]||(e[1]=[g("My Tasks",-1)])]),_:1})]),_:1}),o(a(N),null,{default:n(()=>[o(a(U),{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t)},{default:n(()=>[o(a(k),{value:"all"},{default:n(()=>[o(a(b),null,{default:n(()=>[...e[2]||(e[2]=[g("All",-1)])]),_:1})]),_:1}),o(a(k),{value:"pending"},{default:n(()=>[o(a(b),null,{default:n(()=>[...e[3]||(e[3]=[g("Pending",-1)])]),_:1})]),_:1}),o(a(k),{value:"completed"},{default:n(()=>[o(a(b),null,{default:n(()=>[...e[4]||(e[4]=[g("Done",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(a(A),{fullscreen:!0},{default:n(()=>[o(a(G),{slot:"fixed",onIonRefresh:v},{default:n(()=>[o(a(J))]),_:1}),_.value?(i(),d("div",Q,[(i(),d(w,null,j(5,t=>s("div",{key:t,class:"app-card mb-4 p-4"},[...e[5]||(e[5]=[s("div",{class:"skeleton h-5 w-3/4 mb-2"},null,-1),s("div",{class:"skeleton h-4 w-1/2 mb-2"},null,-1),s("div",{class:"skeleton h-2 w-full"},null,-1)])])),64))])):p.value.length===0?(i(),d("div",X,[o(a(K),{icon:a(q),class:"empty-state-icon"},null,8,["icon"]),e[6]||(e[6]=s("div",{class:"empty-state-title"},"No tasks",-1)),s("div",Y,m(u.value==="completed"?"No completed tasks yet":"No tasks assigned to you"),1)])):(i(),d("div",Z,[(i(!0),d(w,null,j(p.value,t=>(i(),d("div",{key:t.name,class:"app-card mb-4 p-4",onClick:de=>P(t.name)},[s("div",te,[s("h3",se,m(t.title||t.name),1),s("span",{class:T(["status-badge",M(t.status)])},m(t.status),3)]),s("div",le,[t.project?(i(),d("span",ae,"Project: "+m(t.project),1)):R("",!0)]),s("div",oe,[s("span",ne,"Due: "+m(D(t.due_date)),1),t.priority?(i(),d("span",{key:0,class:T(["text-xs font-medium",V(t.priority)])},m(t.priority),3)):R("",!0)]),s("div",re,[s("div",ue,[e[7]||(e[7]=s("span",null,"Progress",-1)),s("span",null,m(t.progress||0)+"%",1)]),s("div",ie,[s("div",{class:"progress-bar-fill",style:O({width:(t.progress||0)+"%"})},null,4)])])],8,ee))),128))]))]),_:1})]),_:1}))}};export{_e as default};
//# sourceMappingURL=Tasks-JUQToSUz.js.map
