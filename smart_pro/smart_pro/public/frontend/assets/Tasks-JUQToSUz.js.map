{"version":3,"file":"Tasks-JUQToSUz.js","sources":["../../../../frontend/src/views/Tasks.vue"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header>\n      <ion-toolbar>\n        <ion-title>My Tasks</ion-title>\n      </ion-toolbar>\n      <ion-toolbar>\n        <ion-segment v-model=\"filter\">\n          <ion-segment-button value=\"all\">\n            <ion-label>All</ion-label>\n          </ion-segment-button>\n          <ion-segment-button value=\"pending\">\n            <ion-label>Pending</ion-label>\n          </ion-segment-button>\n          <ion-segment-button value=\"completed\">\n            <ion-label>Done</ion-label>\n          </ion-segment-button>\n        </ion-segment>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\">\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"handleRefresh\">\n        <ion-refresher-content></ion-refresher-content>\n      </ion-refresher>\n\n      <!-- Loading State -->\n      <div v-if=\"loading\" class=\"p-4\">\n        <div v-for=\"i in 5\" :key=\"i\" class=\"app-card mb-4 p-4\">\n          <div class=\"skeleton h-5 w-3/4 mb-2\"></div>\n          <div class=\"skeleton h-4 w-1/2 mb-2\"></div>\n          <div class=\"skeleton h-2 w-full\"></div>\n        </div>\n      </div>\n\n      <!-- Empty State -->\n      <div v-else-if=\"filteredTasks.length === 0\" class=\"empty-state h-full\">\n        <ion-icon :icon=\"checkmarkCircleOutline\" class=\"empty-state-icon\"></ion-icon>\n        <div class=\"empty-state-title\">No tasks</div>\n        <div class=\"empty-state-description\">\n          {{ filter === \"completed\" ? \"No completed tasks yet\" : \"No tasks assigned to you\" }}\n        </div>\n      </div>\n\n      <!-- Tasks List -->\n      <div v-else class=\"p-4\">\n        <div\n          v-for=\"task in filteredTasks\"\n          :key=\"task.name\"\n          class=\"app-card mb-4 p-4\"\n          @click=\"goToTask(task.name)\"\n        >\n          <div class=\"flex justify-between items-start mb-2\">\n            <h3 class=\"font-semibold text-gray-800 flex-1 pr-2\">\n              {{ task.title || task.name }}\n            </h3>\n            <span :class=\"['status-badge', getStatusClass(task.status)]\">\n              {{ task.status }}\n            </span>\n          </div>\n\n          <div class=\"text-sm text-gray-500 mb-2\">\n            <span v-if=\"task.project\">Project: {{ task.project }}</span>\n          </div>\n\n          <div class=\"flex items-center justify-between text-sm\">\n            <span class=\"text-gray-500\">Due: {{ formatDate(task.due_date) }}</span>\n            <span\n              v-if=\"task.priority\"\n              :class=\"['text-xs font-medium', getPriorityClass(task.priority)]\"\n            >\n              {{ task.priority }}\n            </span>\n          </div>\n\n          <div class=\"mt-3\">\n            <div class=\"flex justify-between text-xs text-gray-500 mb-1\">\n              <span>Progress</span>\n              <span>{{ task.progress || 0 }}%</span>\n            </div>\n            <div class=\"progress-bar\">\n              <div\n                class=\"progress-bar-fill\"\n                :style=\"{ width: (task.progress || 0) + '%' }\"\n              ></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, inject } from \"vue\"\nimport { useRouter } from \"vue-router\"\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonSegment,\n  IonSegmentButton,\n  IonLabel,\n  IonRefresher,\n  IonRefresherContent,\n  IonIcon,\n} from \"@ionic/vue\"\nimport { checkmarkCircleOutline } from \"ionicons/icons\"\nimport { createResource } from \"frappe-ui\"\n\nconst router = useRouter()\nconst $dayjs = inject(\"$dayjs\")\n\nconst loading = ref(true)\nconst filter = ref(\"all\")\nconst tasks = ref([])\n\nconst tasksResource = createResource({\n  url: \"smart_pro.smart_pro.api.projects.get_user_tasks\",\n  auto: false,\n})\n\nconst filteredTasks = computed(() => {\n  if (filter.value === \"all\") return tasks.value\n  if (filter.value === \"pending\") {\n    return tasks.value.filter((t) => t.status !== \"Completed\")\n  }\n  if (filter.value === \"completed\") {\n    return tasks.value.filter((t) => t.status === \"Completed\")\n  }\n  return tasks.value\n})\n\nasync function loadData() {\n  loading.value = true\n  try {\n    await tasksResource.fetch()\n    tasks.value = tasksResource.data || []\n  } catch (error) {\n    console.error(\"Error loading tasks:\", error)\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction handleRefresh(event) {\n  loadData().finally(() => {\n    event.target.complete()\n  })\n}\n\nfunction formatDate(dateStr) {\n  if (!dateStr) return \"-\"\n  const date = $dayjs(dateStr)\n  if (date.isToday()) return \"Today\"\n  if (date.isTomorrow()) return \"Tomorrow\"\n  return date.format(\"MMM D\")\n}\n\nfunction getStatusClass(status) {\n  const map = {\n    Open: \"planning\",\n    Working: \"on-hold\",\n    \"Pending Review\": \"on-hold\",\n    Completed: \"completed\",\n    Cancelled: \"cancelled\",\n  }\n  return map[status] || \"\"\n}\n\nfunction getPriorityClass(priority) {\n  const map = {\n    Low: \"text-green-600\",\n    Medium: \"text-blue-600\",\n    High: \"text-orange-600\",\n    Critical: \"text-red-600\",\n  }\n  return map[priority] || \"text-gray-600\"\n}\n\nfunction goToTask(id) {\n  router.push(`/smart-pro/task/${encodeURIComponent(id)}`)\n}\n\nonMounted(() => {\n  loadData()\n})\n</script>\n"],"names":["router","useRouter","$dayjs","inject","loading","ref","filter","tasks","tasksResource","createResource","filteredTasks","computed","t","loadData","__async","error","handleRefresh","event","formatDate","dateStr","date","getStatusClass","status","getPriorityClass","priority","goToTask","id","onMounted","_createBlock","_unref","IonPage","_createVNode","IonHeader","IonToolbar","IonTitle","_cache","IonSegment","$event","IonSegmentButton","IonLabel","IonContent","IonRefresher","IonRefresherContent","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","i","_createElementVNode","_hoisted_2","IonIcon","checkmarkCircleOutline","_hoisted_3","_toDisplayString","_hoisted_4","task","_hoisted_6","_hoisted_7","_normalizeClass","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_normalizeStyle"],"mappings":"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"}